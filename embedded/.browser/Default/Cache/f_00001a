(function(t){function e(e){for(var a,s,c=e[0],o=e[1],l=e[2],d=0,p=[];d<c.length;d++)s=c[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&p.push(n[s][0]),n[s]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,l||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],a=!0,c=1;c<i.length;c++){var o=i[c];0!==n[o]&&(a=!1)}a&&(r.splice(e--,1),t=s(s.s=i[0]))}return t}var a={},n={0:0},r=[];function s(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=a,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(i,a,function(e){return t[e]}.bind(null,a));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=o;r.push([0,1]),i()})({0:function(t,e,i){t.exports=i("2f39")},"0087":function(t,e,i){"use strict";i("a70f")},"143f":function(t,e,i){"use strict";i("72f7f")},"2f39":function(t,e,i){"use strict";i.r(e);var a=i("c973"),n=i.n(a),r=(i("96cf"),i("ac1f"),i("5319"),i("5c7d"),i("7d6e"),i("e54f"),i("9f29"),i("985d"),i("31cd"),i("2b0e")),s=i("1f91"),c=i("42d2"),o=i("b05d"),l=i("2a19");r["default"].use(o["a"],{config:{},lang:s["a"],iconSet:c["a"],plugins:{Notify:l["a"]}});var u,d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"q-app"}},[t.ready?i("AppWindow"):i("StudioLoader")],1)},p=[],f=i("ded3"),m=i.n(f),v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-layout",{attrs:{view:"hHh Lpr lff"},on:{scroll:t.onScroll}},[i("q-header",{class:t.headerClasses,attrs:{elevated:""}},[i("div",{staticClass:"row items-center"},[i("div",{staticStyle:{"min-width":"400px"}},[i("div",{staticClass:"text-h6 q-py-sm q-px-lg",attrs:{"data-cy":"main-title"}},[t._v("\n          Bluetooth GATT Configurator\n        ")])]),i("q-separator",{staticClass:"gt-sm bg-grey-6",attrs:{vertical:""}}),t.sigLayout?i("q-btn",{staticClass:"q-mx-md q-pr-sm",attrs:{dense:"","no-caps":"",icon:"chevron_left",color:"primary",label:"Back","data-cy":"btn-sig-back"},on:{click:function(e){return t.setSigLayout(!1)}}}):t._e(),i("ActivePageTitle",{staticClass:"col"}),i("q-btn",t._b({staticClass:"q-mr-sm q-px-xs",attrs:{dense:"",label:"View Manual",color:"primary",size:"m","data-cy":"btn-manual"},on:{click:function(e){return t.goToMarkdownId(null)}}},"q-btn",t.BUTTON_PROPS,!1))],1)]),i("q-drawer",{attrs:{value:!0,mini:t.mini,"show-if-above":"",elevated:"",behavior:"desktop",width:400,"mini-width":32}},[i("div",{staticClass:"fit column"},[i("div",{staticClass:"row justify-between items-center q-py-xs"},[i("ButtonBar",{staticClass:"q-mini-drawer-hide q-pl-md"}),i("q-btn",{attrs:{dense:"",flat:"",color:"primary",icon:t.mini?"mdi-chevron-double-right":"mdi-chevron-double-left","data-cy":"btn-drawer-open-close"},on:{click:function(e){t.mini=!t.mini}}})],1),i("q-separator",{staticClass:"q-mini-drawer-hide",staticStyle:{height:"1px"}}),i("div",{staticClass:"col q-mini-drawer-hide"},[i("q-scroll-area",{staticClass:"fit"},[i("GattTree")],1)],1)],1)]),i("q-page-container",[i("q-page",{staticClass:"column",attrs:{padding:""}},[t.sigLayout?i("SigLayout"):t.layout==t.GATT_TYPES.profile?i("ProfileLayout"):t.layout==t.GATT_TYPES.service?i("ServiceLayout"):t.layout==t.GATT_TYPES.characteristic?i("CharacteristicLayout"):t.layout==t.GATT_TYPES.descriptor?i("DescriptorLayout"):t._e()],1)],1),i("UpgradeRuleDialog",{attrs:{"upgrade-results":t.gatt.upgrade_results}}),i("WaspMarkdown",{attrs:{"image-tag":"./md/"}}),i("ProfileValidators",{attrs:{"gatt-item":t.gatt}})],1)},h=[],g=i("2f62"),b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.sigLayout?i("div",{staticClass:"column q-pl-md sig-title"},[i("div",{staticClass:"gt-sm sig-title-main"},[t._v(t._s(t.SIG_META.title))]),i("div",{staticClass:"gt-sm sig-title-details"},[t._v(t._s(t.SIG_META.title_details))])]):i("div",{staticClass:"row text-grey-7 items-center q-px-md"},t._l(t.pathElements,(function(e,a){return i("div",{key:a,staticClass:"gt-sm row items-center"},[a>0?i("q-icon",{staticClass:"items-center q-pa-sm",attrs:{name:"chevron_right",size:"sm"}}):t._e(),i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"items-center q-pa-sm",attrs:{clickable:""},on:{click:function(){t.setSelectedItem(t.itemByVueId(e.vueId))}}},[i("q-icon",{staticClass:"q-pr-sm",attrs:{name:e.icon,color:e.color,size:"sm"}}),t._v("\n      "+t._s(e.name)+"\n    ")],1)],1)})),0)},_=[],y=(i("b0c0"),i("9523")),I=i.n(y),C={profile:"profile",service:"service",characteristic:"characteristic",descriptor:"descriptor"},T={outlined:!0,dense:!0,hideBottomSpace:!0},w={flat:!0,round:!0,dense:!0,color:"primary"},S={outline:!0,"no-caps":!0},E=(u={},I()(u,C.profile,{name:"mdi-alpha-p-box-outline",color:"blue"}),I()(u,C.service,{name:"mdi-alpha-s-box-outline",color:"green"}),I()(u,C.characteristic,{name:"mdi-alpha-c-box-outline",color:"orange"}),I()(u,C.descriptor,{name:"mdi-alpha-d-box-outline",color:"red"}),u),O={name:{label:"Custom GATT name"},gatt_caching:{label:"GATT Caching"},generic_attribute_service:{label:"Generic Attribute Service"},capability_declarations:{label:"Capability declarations",column_labels:{name:"Name",enable:"Enabled"}}},q={name:{label:"Name",description:""},uuid:{label:"UUID",description:""},type:{label:"SIG type",description:""},declaration_type:{label:"Declaration type",description:"",items:["primary","secondary"]},id:{label:"ID",description:""},advertise:{label:"Advertise service",description:""},includes:{label:"Service includes",description:""},capabilities:{label:"Service capabilities",description:""},characteristics:{label:"",description:""},info:{label:"Info",description:""}},A={constant:{label:"Constant"},length:{label:"Value length",unit:"byte"},variable_length:{label:"Variable length"},init_value:{label:"Initial value"},type:{label:"Value type",items:["user","hex","utf-8"]}},k={name:{label:"Name"},id:{label:"ID"},uuid:{label:"UUID"},type:{label:"SIG type"},properties:{label:"Permission settings",column_labels:{enable:"",name:"Name",authenticated:"Authenticated",bonded:"Bonded",encrypted:"Encrypted"},property_names:{read:"Read",write:"Write",reliable_write:"Reliable write",write_no_response:"Write without response",notify:"Notify",indicate:"Indicate"}},capabilities:{label:"Characteristic capabilities",description:""},description:{label:"User description"},info:{label:"Info",description:""}},x={name:{label:"Name"},id:{label:"ID"},uuid:{label:"UUID"},type:{label:"SIG type"},discoverable:{label:"Discoverable"},properties:{label:"Permission settings",column_labels:{enable:"",name:"Name",authenticated:"Authenticated",bonded:"Bonded",encrypted:"Encrypted"},property_names:{read:"Read",write:"Write"}},info:{label:"Info",description:""}},P={title:"Add Standard Bluetooth Services, Characteristics, Descriptors",title_details:"Drag and drop services, characteristics and descriptors from the right side panel to Custom Bluetooth GATT profile",source_labels:{sig:"BT",homekit:"Apple Homekit",silabs:"Silicon Labs",mesh:"BT Mesh"}},M={sig_gatt_item_added:{single:{service:" Service",characteristic:" Characteristic",descriptor:" Descriptor",item:" GATT item",added:" has been added successfully."},multiple:{service:" Services",characteristic:" Characteristics",descriptor:" Descriptors",item:" GATT items",added:" have been added successfully."}},new_custom_item:{custom:"Custom ",added:" has been added."},duplicate_item:{duplicated:" has been duplicated."},import_item:{success:"Import has been successful."}},D={data:function(){return{ICONS:E,SIG_META:P}},computed:m()(m()(m()({},Object(g["mapGetters"])("GattConfiguratorApp",["gatt","selectedItem","itemByVueId"])),Object(g["mapGetters"])("MainView",["sigLayout"])),{},{pathElements:function(){var t=[],e=this.selectedItem;while(null!=e["parent"])e=e.parent,t.unshift({name:e.name,icon:E[e.gatt_type].name,color:E[e.gatt_type].color,vueId:e.vueId});return t}}),methods:m()({},Object(g["mapActions"])("GattConfiguratorApp",["setSelectedItem"]))},V=D,N=i("2877"),G=i("0016"),R=i("66e5"),j=i("714f"),U=i("eebe"),Q=i.n(U),L=Object(N["a"])(V,b,_,!1,null,null,null),$=L.exports;Q()(L,"components",{QIcon:G["a"],QItem:R["a"]}),Q()(L,"directives",{Ripple:j["a"]});var B=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"q-pt-sm"},[i("div",{staticClass:"row treeNode",class:{selectedNode:t.gatt==t.selectedItem}},[i("div",{staticClass:"col-auto"},[i("q-icon",{staticClass:"invisible",attrs:{name:"mdi-menu-down",size:"sm"}})],1),i("GattTreeItem",{staticClass:"col cursor-pointer",attrs:{value:t.gatt},on:{click:t.setSelectedItem}}),i("GattTreeItemValidation",{attrs:{value:t.gatt}})],1),i("DragTree",{staticClass:"q-pl-md",attrs:{value:t.gatt.services,"set-children":t.setKids,"node-key":"vueId","expand-default":!0,groups:t.groups,level:1,selected:t.selectedItem},on:{input:function(e){return t.setKids(t.gatt,e)}},scopedSlots:t._u([{key:"label",fn:function(e){var a=e.node;return[i("div",{staticClass:"row"},[i("GattTreeItem",{staticClass:"cursor-pointer col",class:{"capability-disabled":t.capabilityDisabled(a)},attrs:{value:a},on:{click:t.setSelectedItem}}),i("GattTreeItemValidation",{attrs:{value:a}})],1)]}}])}),t.serviceContributions.length?i("div",{staticClass:"row items-center q-px-md"},[i("q-separator",{staticClass:"col"}),i("div",{staticClass:"text-caption q-px-sm text-grey"},[t._v("\n      Contributed items\n    ")]),i("q-separator",{staticClass:"col"}),i("q-icon",{staticClass:"q-ml-sm",attrs:{name:"mdi-information-outline",size:"sm",color:"grey-5"}},[i("q-tooltip",[t._v("\n        The following items are contributed by software components "),i("br"),t._v("\n        and cannot be modified in the Bluetooth GATT Configurator.\n      ")])],1)],1):t._e(),t.serviceContributions.length?i("DragTree",{staticClass:"q-pl-md",attrs:{value:t.serviceContributions,"node-key":"vueId","expand-default":!0,"drag-options":{disabled:!0},"read-only":"",level:1,selected:t.selectedItem},scopedSlots:t._u([{key:"label",fn:function(e){var a=e.node;return[i("GattTreeItem",{staticClass:"cursor-pointer text-italic",class:{"capability-disabled":t.capabilityDisabled(a)},attrs:{value:a},on:{click:t.setSelectedItem}})]}}],null,!1,1943040851)}):t._e()],1)},Y=[],F=i("6374"),z=i.n(F),W=i("448a"),H=i.n(W),K=(i("159b"),i("a434"),i("99af"),i("c740"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("vuedraggable",t._g(t._b({staticClass:"item-container",attrs:{tag:"div",value:t.value,group:t.groups[0]||t.level},on:{input:t.emitter}},"vuedraggable",t.dragOptions,!1),t.dragEvents),t._l(t.value,(function(e){return i("div",{directives:[{name:"show",rawName:"v-show",value:!t.hide&&!e.hide,expression:"!hide && !node.hide"}],key:e[t.nodeKey]},[i("div",{staticClass:"row treeNode",class:{selectedNode:e==t.selected},style:t.leftMargin},[i("div",{staticClass:"col-auto"},[i("q-icon",{staticClass:"cursor-pointer",class:{invisible:!(e.children&&e.children.length)},attrs:{name:t.isExpanded(e)?"mdi-menu-down":"mdi-menu-right",size:"sm"},on:{click:function(i){t.setExpanded(e,!t.isExpanded(e))}}})],1),i("div",{staticClass:"col"},[t._t("label",[t._v("error")],{node:e})],2)]),!e.children||t.readOnly&&!t.isExpanded(e)?t._e():i("DragTree",{staticClass:"q-pl-md",attrs:{value:e.children,"node-key":t.nodeKey,groups:t.groups.slice(1),level:t.level+1,"expand-default":t.expandDefault,hide:!t.isExpanded(e),"set-children":t.setChildren,"drag-options":t.dragOptions,"drag-events":t.dragEvents,selected:t.selected,"read-only":t.readOnly},on:{input:function(i){return t.setChildren(e,i)}},scopedSlots:t._u([{key:"label",fn:function(e){return[t._t("label",[t._v("he")],{node:e.node})]}}],null,!0)})],1)})),0)}),J=[],Z=(i("a9e3"),i("e260"),i("d3b7"),i("6062"),i("3ca3"),i("ddb0"),i("b76a")),X=i.n(Z),tt={name:"DragTree",components:{vuedraggable:X.a},props:{nodeKey:{type:String,default:"vueId"},groups:{type:Array,default:function(){return[]}},level:{default:0,type:Number},expandDefault:{type:Boolean,default:!1},value:{default:null,type:Array},dragEvents:{type:Object,default:function(){}},dragOptions:{type:Object,default:function(){}},hide:Boolean,setChildren:{type:Function,default:function(t,e){t.children=e}},readOnly:{type:Boolean,default:!1},expandedItems:Set,selected:{type:Object,default:null}},data:function(){return{shift:15,expanded_local:null}},computed:{leftMargin:function(){var t=16*this.level;return"margin-left: -".concat(t,"px; padding-left: ").concat(t,"px;")},expanded:{get:function(){return this.expandedItems||this.expanded_local},set:function(t){this.expandedItems||(this.expanded_local=t),this.$emit("update:expandedItems",t)}}},watch:{},created:function(){if(this.expandedItems||(this.expanded_local=new Set),this.expandDefault){var t,e=new Set(this.expanded),i=z()(this.value);try{for(i.s();!(t=i.n()).done;){var a=t.value;e.add(a[this.nodeKey])}}catch(n){i.e(n)}finally{i.f()}this.expanded=e}},methods:{emitter:function(t){this.$emit("input",t)},isExpanded:function(t){return this.expanded.has(t[this.nodeKey])},setExpanded:function(t,e){var i=new Set(this.expanded);e?i.add(t[this.nodeKey]):i.delete(t[this.nodeKey]),this.expanded=i}}},et=tt,it=Object(N["a"])(et,K,J,!1,null,null,null),at=it.exports;Q()(it,"components",{QIcon:G["a"]});var nt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row q-gutter-xs items-center",attrs:{"data-cy":"gatt-tree-item-"+t.value.gatt_type},on:{click:t.onClick,mousedown:t.onMouseDown}},[i("q-icon",{attrs:{size:"sm",name:t.ICONS[t.value.gatt_type].name,color:t.ICONS[t.value.gatt_type].color}},[i("q-tooltip",[i("div",{staticClass:"text-capitalize"},[t._v(t._s(t.value.gatt_type))])])],1),i("div",{staticClass:"col",staticStyle:{"overflow-wrap":"break-word"}},[t._v(t._s(t.value.name))])],1)},rt=[],st={name:"GattTreeItem",props:{value:{type:Object,required:!0}},data:function(){return{ICONS:E}},methods:{onClick:function(){this.$emit("click",this.value)},onMouseDown:function(){this.$emit("mousedown",this.value)}}},ct=st,ot=i("05c0"),lt=Object(N["a"])(ct,nt,rt,!1,null,null,null),ut=lt.exports;Q()(lt,"components",{QIcon:G["a"],QTooltip:ot["a"]});var dt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return"validationMessages"in t.value&&Object.keys(t.value["validationMessages"]).length>0?i("div",{staticClass:"q-mr-sm q-pr-xs"},[i("ValidationMarker",{attrs:{type:t.cumulatedValMsgs.type,messages:t.cumulatedValMsgs.messages}})],1):t._e()},pt=[],ft=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.render?i("q-icon",{class:t.iconClass,attrs:{name:t.icon,size:"sm"}},[i("q-tooltip",{attrs:{"content-class":t.tooltipClass,"max-width":"500px"}},t._l(t.messages,(function(e,a){return i("div",{key:a},[t._v("\n      "+t._s(e)+"\n    ")])})),0)],1):t.placeholder?i("q-icon",{attrs:{name:"mdi-blank",size:"sm"}}):t._e()},mt=[],vt=(i("caad"),{error:"mdi-alert-circle",warning:"mdi-alert",info:"mdi-information-outline"}),ht={error:"alert-error-icon",warning:"alert-warning-icon",info:"alert-info"},gt={error:"alert-error-tooltip",warning:"alert-warning-tooltip",info:""},bt=["error","warning","info"],_t={props:{type:{type:String,default:"info"},messages:{type:Array,default:function(){return[]}},placeholder:Boolean},computed:{render:function(){return bt.includes(this.type)},icon:function(){return vt[this.type]},iconClass:function(){return ht[this.type]},tooltipClass:function(){return gt[this.type]}}},yt=_t,It=(i("c93e"),Object(N["a"])(yt,ft,mt,!1,null,null,null)),Ct=It.exports;Q()(It,"components",{QIcon:G["a"],QTooltip:ot["a"]});var Tt={name:"GattTreeItem",components:{ValidationMarker:Ct},props:{value:{type:Object,required:!0}},computed:{cumulatedValMsgs:function(){for(var t={type:null,messages:[]},e=this.value.validationMessages,i=0,a=["error","warning"];i<a.length;i++){var n=a[i];for(var r in e)if(n in e[r]&&(null==t.type||t.type==n)){var s,c=z()(e[r][n]);try{for(c.s();!(s=c.n()).done;){var o=s.value;t.type=n,-1==t.messages.indexOf(o)&&t.messages.push(o)}}catch(l){c.e(l)}finally{c.f()}}}return t}},methods:{}},wt=Tt,St=Object(N["a"])(wt,dt,pt,!1,null,null,null),Et=St.exports,Ot=i("853f"),qt=(i("d81d"),i("2532"),i("a4d3"),i("e01a"),i("cca6"),i("2ca0"),i("1732"));function At(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.gatt_caching,a=void 0===i||i,n=e.generic_attribute_service,r=void 0===n||n,s=e.name,c=void 0===s?"Custom Gatt Config":s,o=e.capability_declarations,l=void 0===o?[]:o,u=e.services,d=void 0===u?[]:u,p=e.upgrade_results,f=void 0===p?null:p;this.gatt_caching=a,this.generic_attribute_service=r,this.name=c,this.capability_declarations=l.map((function(t){return new kt(t)})),this.services=d.map((function(e){return new xt(e,t)})),this.upgrade_results=f}function kt(t){var e=t.name,i=void 0===e?"Feature":e,a=t.enable,n=void 0===a||a;this.name=i,this.enable=n}function xt(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.name,a=void 0===i?"Custom Service":i,n=e.uuid,r=void 0===n?Object(qt["a"])():n,s=e.type,c=void 0===s?"":s,o=e.info,l=void 0===o?"":o,u=e.id,d=void 0===u?null:u,p=e.instance_id,f=void 0===p?null:p,m=e.capabilities,v=void 0===m?[]:m,h=e.advertise,g=void 0!==h&&h,b=e.declaration_type,_=void 0===b?"primary":b,y=e.includes,I=void 0===y?[]:y,C=e.characteristics,T=void 0===C?[]:C;this.name=a,this.uuid=r,this.type=c,this.info=l,this.id=d,this.instance_id=f,this.capabilities=H()(v),this.advertise=g,this.declaration_type=_,this.includes=H()(I),this.characteristics=T.map((function(e){return new Pt(e,t)}))}function Pt(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.name,a=void 0===i?"Custom Characteristic":i,n=e.uuid,r=void 0===n?Object(qt["a"])():n,s=e.type,c=void 0===s?"":s,o=e.info,l=void 0===o?"":o,u=e.id,d=void 0===u?null:u,p=e.instance_id,f=void 0===p?null:p,m=e.capabilities,v=void 0===m?[]:m,h=e.value,g=void 0===h?{}:h,b=e.description,_=void 0===b?null:b,y=e.permissions,I=void 0===y?{}:y,C=e.descriptors,T=void 0===C?[]:C;this.name=a,this.uuid=r,this.type=c,this.info=l,this.id=d,this.instance_id=f,this.capabilities=H()(v),this.value=new Vt(g),this.description=_,this.permissions=new Nt(I),this.descriptors=T.map((function(e){return new Mt(e,t)}))}function Mt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.name,i=void 0===e?"Custom Descriptor":e,a=t.uuid,n=void 0===a?Object(qt["a"])():a,r=t.type,s=void 0===r?"":r,c=t.info,o=void 0===c?"":c,l=t.id,u=void 0===l?null:l,d=t.instance_id,p=void 0===d?null:d,f=t.capabilities,m=void 0===f?[]:f,v=t.discoverable,h=void 0===v||v,g=t.value,b=void 0===g?{}:g,_=t.permissions,y=void 0===_?{}:_;this.name=i,this.uuid=n,this.type=s,this.info=o,this.id=u,this.instance_id=p,this.capabilities=H()(m),this.discoverable=h,this.value=new Vt(b),this.permissions=new Gt(y)}function Dt(t){return"hex"===t}function Vt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.constant,i=void 0!==e&&e,a=t.length,n=void 0===a?null:a,r=t.variable_length,s=void 0!==r&&r,c=t.type,o=void 0===c?"hex":c,l=t.init_value,u=void 0===l?"00":l;Object.assign(this,{constant:i,length:n,variable_length:s,type:o,init_value:u}),Dt(o)&&u.startsWith("0x")&&(this.init_value=u.replace("0x",""))}function Nt(t){var e=t.read,i=void 0===e?{properties:{read:!1}}:e,a=t.write,n=void 0===a?{properties:{write:!1,write_no_response:!1,reliable_write:!1}}:a,r=t.notify,s=void 0===r?{properties:{notify:!1,indicate:!1}}:r;this.read=new Rt(i),this.write=new Rt(n),this.notify=new Rt(s)}function Gt(t){var e=t.read,i=void 0===e?{properties:{read:!1}}:e,a=t.write,n=void 0===a?{properties:{write:!1}}:a;this.read=new Rt(i),this.write=new Rt(n)}function Rt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.authenticated,i=void 0!==e&&e,a=t.bonded,n=void 0!==a&&a,r=t.encrypted,s=void 0!==r&&r,c=t.properties,o=void 0===c?{}:c;this.authenticated=i,this.bonded=n,this.encrypted=s,this.properties=o}function jt(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.capability_declarations,a=void 0===i?[]:i,n=e.services,r=void 0===n?[]:n,s=e.source_file,c=void 0===s?null:s;At.call(this,m()(m()({},e),{},{services:[],capability_declarations:[]})),this.source_file=c,this.capability_declarations=a.map((function(t){return new Ut(m()(m()({},t),{},{source_file:c}))})),this.services=r.map((function(e){return new Qt(m()(m()({},e),{},{parent:t}))})),this.vueId=Object(qt["a"])(),this.undraggable=!0,this.validationMessages={}}function Ut(t){var e=t.name,i=void 0===e?"Feature":e,a=t.enable,n=void 0===a||a,r=t.source_file,s=void 0===r?null:r;this.name=i,this.enable=n,this.source_file=s}function Qt(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.characteristics,a=void 0===i?[]:i,n=e.parent,r=void 0===n?null:n,s=e.source_file,c=void 0===s?null:s;xt.call(this,m()(m()({},e),{},{characteristics:[]})),this.source_file=c||(r?r.source_file:null),this.characteristics=a.map((function(e){return new Lt(m()(m()({},e),{},{parent:t}))})),this.vueId=Object(qt["a"])(),this.parent=r,this.undraggable=null!=this.source_file,this.validationMessages={}}function Lt(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.descriptors,a=void 0===i?[]:i,n=e.parent,r=void 0===n?null:n,s=e.source_file,c=void 0===s?null:s;Pt.call(this,m()(m()({},e),{},{descriptors:[]})),this.source_file=c||(r?r.source_file:null),this.descriptors=a.map((function(e){return new $t(m()(m()({},e),{},{parent:t}))})),this.vueId=Object(qt["a"])(),this.parent=r,this.undraggable=null!=this.source_file,this.validationMessages={}}function $t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.parent,i=void 0===e?null:e,a=t.source_file,n=void 0===a?null:a;Mt.call(this,t),this.source_file=n||(i?i.source_file:null),this.vueId=Object(qt["a"])(),this.parent=i,this.undraggable=null!=this.source_file,this.validationMessages={}}function Bt(t){if(t.visit(this),this.children){var e,i=z()(this.children);try{for(i.s();!(e=i.n()).done;){var a=e.value;a.accept(t)}}catch(n){i.e(n)}finally{i.f()}}}jt.prototype.gatt_type=C.profile,Qt.prototype.gatt_type=C.service,Lt.prototype.gatt_type=C.characteristic,$t.prototype.gatt_type=C.descriptor,Object.defineProperty(jt.prototype,"children",{get:function(){return this.services},set:function(t){this.services=t}}),Object.defineProperty(Qt.prototype,"children",{get:function(){return this.characteristics},set:function(t){this.characteristics=t}}),Object.defineProperty(Lt.prototype,"children",{get:function(){return this.descriptors},set:function(t){this.descriptors=t}}),jt.prototype.accept=Bt,Qt.prototype.accept=Bt,Lt.prototype.accept=Bt,$t.prototype.accept=Bt;var Yt=i("af17"),Ft=(i("dffb"),i("b64b"),i("5218"));function zt(t){var e=t.gattType,i=t.gattItem;if(null!=e&&null!=i){var a={};switch(Object.keys(C).forEach((function(t){return a[t]=0})),e){case C.profile:a.profile=1,a.service=i.services.length,i.services.forEach((function(t){a.characteristic+=t.characteristics.length,t.characteristics.forEach((function(t){return a.descriptor+=t.descriptors.length}))}));break;case C.service:a.service=1,a.characteristic=i.characteristics.length,i.characteristics.forEach((function(t){return a.descriptor+=t.descriptors.length}));break;case C.characteristic:a.characteristic=1,a.descriptor=i.descriptors.length;break;case C.descriptor:a.descriptor=1;break}return a}}function Wt(t){if(null==t)return null;var e={title:"",svgIcon:Ft["a"],details:""};if(t.service+t.characteristic+t.descriptor==0)return null;if(t.service+t.characteristic+t.descriptor==1){for(var i in e["title"]=1+M.sig_gatt_item_added.single.item+M.sig_gatt_item_added.single.added,t)if(t[i]>0){e["details"]=1+M.sig_gatt_item_added.single[i]+".";break}}else e["title"]=t.service+t.characteristic+t.descriptor+M.sig_gatt_item_added.multiple.item+M.sig_gatt_item_added.multiple.added,t.service>0&&(1==t.service?e["details"]=1+M.sig_gatt_item_added.single.service:e["details"]=t.service+M.sig_gatt_item_added.multiple.service),t.characteristic>0&&(""!=e["details"]&&(e["details"]+=", "),1==t.characteristic?e["details"]+=1+M.sig_gatt_item_added.single.characteristic:e["details"]+=t.characteristic+M.sig_gatt_item_added.multiple.characteristic),t.descriptor>0&&(""!=e["details"]&&(e["details"]+=", "),1==t.descriptor?e["details"]+=1+M.sig_gatt_item_added.single.descriptor:e["details"]+=t.descriptor+M.sig_gatt_item_added.multiple.descriptor),e["details"]+=".";return e}function Ht(t){var e={title:M.new_custom_item.custom+t+M.new_custom_item.added,svgIcon:Ft["a"]};return e}function Kt(t){var e={title:"'"+t+"'"+M.duplicate_item.duplicated,svgIcon:Ft["a"]};return e}function Jt(){var t={title:M.import_item.success,svgIcon:Ft["a"]};return t}function Zt(t,e){var i;if(t===C.profile?i=e.services:t===C.service?i=[e]:t===C.characteristic&&(i=[{characteristics:[e]}]),i){var a,n=z()(i);try{for(n.s();!(a=n.n()).done;){var r,s=a.value;null===(r=s.characteristics)||void 0===r||r.forEach((function(t){var e,i,a=null===(e=t.descriptors)||void 0===e?void 0:e.findIndex((function(t){return"2902"===t.uuid}));-1!=a&&(null===(i=t.descriptors)||void 0===i||i.splice(a,1))}))}}catch(c){n.e(c)}finally{n.f()}}}function Xt(t){var e;null===(e=t.characteristics)||void 0===e||e.forEach((function(t){var e,i,a=null===(e=t.descriptors)||void 0===e?void 0:e.findIndex((function(t){return"org.bluetooth.descriptor.gatt.client_characteristic_configuration"===t.type}));-1!=a&&(null===(i=t.descriptors)||void 0===i||i.splice(a,1))}))}var te={namespaced:!0,components:{DragTree:at,GattTreeItem:ut,GattTreeItemValidation:Et},data:function(){return{ICONS:E,GATT_TYPES:C,groups:[C.service,C.characteristic,C.descriptor]}},computed:m()(m()({},Object(g["mapGetters"])("GattConfiguratorApp",["gatt","mergedGatt","serviceContributions","selectedItem"])),Object(g["mapGetters"])("Sig",["draggedItemPromise"])),methods:m()(m()({setSigDraggedItem:function(t,e,i,a){if(null==a||""==a||!("gattType"in a)||!("gattItem"in a))throw"Faulty sig gatt item!";var n=a.gattType,r=a.gattItem;if(Zt(n,r),Ot["default"].debug("SIG Gatt item:"),Ot["default"].debug(a,!0),n==C.profile){var s=new jt(r);s.services.forEach((function(e){return e.parent=t})),e.splice.apply(e,[i,1].concat(H()(s.services)))}else n==C.service?e[i]=new Qt(m()(m()({},r),{},{parent:t})):n==C.characteristic?e[i]=new Lt(m()(m()({},r),{},{parent:t})):n==C.descriptor?e[i]=new $t(m()(m()({},r),{},{parent:t})):Ot["default"].error("Wrong gatt type: "+n);var c=Wt(zt(a));null!=(null===c||void 0===c?void 0:c.title)&&this.$q.notify(Yt["Notifications"].qNotificationHtmlObj(Yt["Notifications"].notificationHtmlMsg(c))),this.setChildren({object:t,children:e})},setKids:function(t,e){var i=this,a=e.findIndex((function(t){return"gattType"in t&&"types"in t}));if(-1==a){var n,r=z()(e);try{for(r.s();!(n=r.n()).done;){var s=n.value;s.parent=t}}catch(c){r.e(c)}finally{r.f()}this.setChildren({object:t,children:e})}else this.draggedItemPromise.then((function(n){i.setSigDraggedItem(t,e,a,n)})).catch((function(t){Ot["default"].error(t)}))}},Object(g["mapActions"])("GattConfiguratorApp",["setChildren","setSelectedItem"])),{},{capabilityDisabled:function(t){if(t.gatt_type==C.profile)return!1;if(0==this.mergedGatt.capability_declarations.length)return!1;var e,i,a={},n=!1,r=!1,s=!1,c=z()(this.mergedGatt.capability_declarations);try{for(c.s();!(i=c.n()).done;)e=i.value,a[e.name]=e.enable}catch(m){c.e(m)}finally{c.f()}if(null!=t["parent"]&&null!=t["parent"]["parent"]&&t["parent"]["parent"].gatt_type==C.service&&null!=t["parent"]["parent"].capabilities&&t["parent"]["parent"].capabilities.length>0){s=!0;var o,l=z()(t["parent"]["parent"].capabilities);try{for(l.s();!(o=l.n()).done;)e=o.value,null!=a[e]&&a[e]&&(s=!1)}catch(m){l.e(m)}finally{l.f()}}if(null!=t["parent"]&&(t["parent"].gatt_type==C.characteristic||t["parent"].gatt_type==C.service)&&null!=t["parent"].capabilities&&t["parent"].capabilities.length>0){r=!0;var u,d=z()(t["parent"].capabilities);try{for(d.s();!(u=d.n()).done;)e=u.value,null!=a[e]&&a[e]&&(r=!1)}catch(m){d.e(m)}finally{d.f()}}if(null!=t.capabilities&&t.capabilities.length>0){n=!0;var p,f=z()(t.capabilities);try{for(f.s();!(p=f.n()).done;)e=p.value,null!=a[e]&&a[e]&&(n=!1)}catch(m){f.e(m)}finally{f.f()}}return s||r||n}})},ee=te,ie=(i("143f"),i("eb85")),ae=Object(N["a"])(ee,B,Y,!1,null,null,null),ne=ae.exports;Q()(ae,"components",{QIcon:G["a"],QSeparator:ie["a"],QTooltip:ot["a"]});var re=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"row q-gutter-sm"},[i("div",{attrs:{"data-cy":"btn-button-bar-custom-add"}},[i("q-btn",t._b({attrs:{icon:"mdi-file-plus-outline",disable:!t.newChildActive},on:{click:function(e){t.showTooltip=!1}}},"q-btn",t.BUTTON_BAR_PROPS,!1),[i("q-menu",[i("q-list",{attrs:{dense:""}},[i("q-item",{attrs:{dense:"",clickable:"","data-cy":"btn-button-bar-custom-add-service"},on:{click:function(e){return t.addItem(t.GATT_TYPES.service)}}},[i("q-item-section",[t._v("New Service")])],1),i("q-item",{attrs:{dense:"",clickable:"","data-cy":"btn-button-bar-custom-add-characteristic"},on:{click:function(e){return t.addItem(t.GATT_TYPES.characteristic)}}},[i("q-item-section",[t._v("New Characteristic ")])],1),i("q-item",{attrs:{dense:"",clickable:"","data-cy":"btn-button-bar-custom-add-descriptor"},on:{click:function(e){return t.addItem(t.GATT_TYPES.descriptor)}}},[i("q-item-section",[t._v("New Descriptor ")])],1)],1)],1)],1),i("q-tooltip",{model:{value:t.showTooltip,callback:function(e){t.showTooltip=e},expression:"showTooltip"}},[t._v("Add new item")])],1),i("div",{attrs:{"data-cy":"btn-button-bar-copy"}},[i("q-btn",t._b({attrs:{icon:"mdi-content-copy",disable:!t.duplicateActive},on:{click:function(e){t.duplicateSelectedItem(),t.duplicateItemNotify()}}},"q-btn",t.BUTTON_BAR_PROPS,!1)),i("q-tooltip",[t._v("Duplicate selected item")])],1),i("div",{attrs:{"data-cy":"btn-button-bar-move-up"}},[i("q-btn",t._b({attrs:{icon:"mdi-arrow-up",disable:!t.moveUpActive},on:{click:t.moveUpSelectedItem}},"q-btn",t.BUTTON_BAR_PROPS,!1)),i("q-tooltip",[t._v("\n        Move up selected item\n      ")])],1),i("div",{attrs:{"data-cy":"btn-button-bar-move-down"}},[i("q-btn",t._b({attrs:{icon:"mdi-arrow-down",disable:!t.moveDownActive},on:{click:t.moveDownSelectedItem}},"q-btn",t.BUTTON_BAR_PROPS,!1)),i("q-tooltip",[t._v("Move down selected item")])],1),i("q-btn",t._b({attrs:{icon:"mdi-application-import","data-cy":"btn-button-bar-import"},on:{click:function(e){t.uploaderDialog=!0,t.uploaderError=null}}},"q-btn",t.BUTTON_BAR_PROPS,!1),[i("q-tooltip",[t._v("Import")])],1),i("q-btn",t._b({attrs:{outline:!t.sigLayout,icon:"mdi-plus-thick","data-cy":"btn-button-bar-sig"},on:{click:function(e){return t.setSigLayout(!t.sigLayout)}}},"q-btn",t.BUTTON_BAR_PROPS,!1),[i("q-tooltip",[t._v("Toggle - Add Standard Bluetooth GATT items - view")])],1),i("div",{attrs:{"data-cy":"btn-button-bar-remove"}},[i("q-btn",t._b({attrs:{color:"negative",icon:"mdi-close-thick",disable:!t.removeActive},on:{click:function(e){t.deleteConfirm=!0}}},"q-btn",t.BUTTON_BAR_PROPS,!1)),i("q-tooltip",[t._v("Delete selected item")])],1)],1),i("q-dialog",{attrs:{persistent:""},model:{value:t.deleteConfirm,callback:function(e){t.deleteConfirm=e},expression:"deleteConfirm"}},[i("q-card",[i("q-card-section",{staticClass:"row items-center q-gutter-md"},[i("q-icon",{attrs:{name:"mdi-alert-circle ",color:"negative",size:"md"}}),i("div",[t._v("\n          Are you sure you want to permanently delete the selected item?\n        ")])],1),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{"data-cy":"btn-button-bar-remove-pop-up-cancel",flat:"",label:"Cancel",color:"primary"}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{"data-cy":"btn-button-bar-remove-pop-up-delete",flat:"",label:"Delete",color:"negative"},on:{click:t.removeSelectedItem}})],1)],1)],1),i("q-dialog",{model:{value:t.uploaderDialog,callback:function(e){t.uploaderDialog=e},expression:"uploaderDialog"}},[i("q-card",[i("q-card-section",[i("div",{staticClass:"text-h6"},[t._v("File Importer")])]),i("q-separator"),i("q-card-section",{staticClass:"scroll",staticStyle:{"max-height":"50vh"}},[t.uploaderError?i("q-banner",{staticClass:"text-white bg-red"},[t._v("\n          "+t._s(t.uploaderError)+"\n        ")]):i("q-uploader",{attrs:{factory:t.factoryFn,"auto-upload":"",accept:".btconf, .isc, .xml, .bgproj"}})],1),i("q-separator"),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Close",color:"primary"}})],1)],1)],1)],1)},se=[],ce=(i("07ac"),{getData:function(t){var e="/rest/gattConfigurator/data?id="+t;return Yt["RestApi"].get(e).then((function(t){return t.data}))},getDataMock:function(){var t="/mock/gattconfig.json";return Yt["RestApi"].get(t).then((function(t){return t.data}))},getContributions:function(t){var e="/rest/gattConfigurator/contributions?id="+t;return Yt["RestApi"].get(e).then((function(t){return t.data}))},getContributionsMock:function(){var t="/mock/htm_contribution.json";return Yt["RestApi"].get(t).then((function(t){return t.data}))},getSigInfo:function(t,e,i){var a,n="/rest/gattConfigurator/sig-info?id="+t+"&gatt-type="+e,r=z()(i);try{for(r.s();!(a=r.n()).done;){var s=a.value;n+="&type="+s}}catch(c){r.e(c)}finally{r.f()}return Yt["RestApi"].get(n).then((function(t){return t.data}))},getSigGattItem:function(t,e,i){var a,n="/rest/gattConfigurator/sig-gatt-item?id=".concat(t,"&gatt-type=").concat(e),r=z()(i);try{for(r.s();!(a=r.n()).done;){var s=a.value;n+="&type="+s}}catch(c){r.e(c)}finally{r.f()}return Yt["RestApi"].get(n).then((function(t){return t.data}))},getMarkDown:function(){var t="md/readme.md";return Yt["RestApi"].get(t).then((function(t){return t.data}))},getSigTreeData:function(t){var e="/rest/gattConfigurator/sig-tree-data?id="+t;return Yt["RestApi"].get(e).then((function(t){return t.data}))},getSigTreeDataMock:function(){var t="/mock/sig.json";return Yt["RestApi"].get(t).then((function(t){return t.data}))},setDirty:function(t){var e="/rest/gattConfigurator/dirty?id="+t;return Yt["RestApi"].get(e).then((function(t){return t.data}))},postSave:function(t){var e="/rest/gattConfigurator/save/";return Yt["RestApi"].post(e,t.data,{headers:{editorId:t.id}}).catch((function(t){return window.console.log("data returned ERROR "+t.response.data)}))},postImport:function(t,e){var i="/rest/gattConfigurator/import/";return Yt["RestApi"].post(i,e,{headers:{editorId:t}})}}),oe={namespaced:!0,data:function(){return{showTooltip:!1,BUTTON_BAR_PROPS:{color:"primary",outline:!0,dense:!0,size:"sm"},ICONS:E,GATT_TYPES:C,deleteConfirm:!1,uploaderDialog:!1,uploaderError:null}},computed:m()(m()(m()({},Object(g["mapGetters"])("GattConfiguratorApp",["gatt","serviceContributions","capabilityContributions","selectedItem","itemByVueId"])),Object(g["mapGetters"])("MainView",["id","sigLayout"])),{},{newChildActive:function(){return!this.selectedItem.source_file},duplicateActive:function(){return Object.values(C).includes(this.selectedItem.gatt_type)&&this.selectedItem.gatt_type!=C.profile&&!this.selectedItem.source_file||this.selectedItem.source_file&&this.selectedItem.gatt_type==C.service},removeActive:function(){return Object.values(C).includes(this.selectedItem.gatt_type)&&this.selectedItem.gatt_type!=C.profile&&!this.selectedItem.source_file},moveUpActive:function(){if(this.selectedItem.parent&&!this.selectedItem.source_file){var t=this.selectedItem.parent.children;return t.indexOf(this.selectedItem)>0}return!1},moveDownActive:function(){if(this.selectedItem.parent&&!this.selectedItem.source_file){var t=this.selectedItem.parent.children;return t.indexOf(this.selectedItem)<t.length-1}return!1}}),watch:{deleteConfirm:function(){this.setDialogOn(this.deleteConfirm)},uploaderDialog:function(){this.setDialogOn(this.uploaderDialog)}},methods:m()(m()(m()({},Object(g["mapActions"])("GattConfiguratorApp",["setSelectedItem","removeSelectedItem","duplicateSelectedItem","moveUpSelectedItem","moveDownSelectedItem","addGattItem"])),Object(g["mapActions"])("MainView",["updateData","setDialogOn","setSigLayout"])),{},{addItem:function(t){var e=null;if(t==C.service)e=new Qt;else if(t==C.characteristic)e=new Lt;else{if(t!=C.descriptor)return;e=new $t}this.addGattItem({gattItem:e,gattType:t}),this.$q.notify(Yt["Notifications"].qNotificationHtmlObj(Yt["Notifications"].notificationHtmlMsg(Ht(t))))},factoryFn:function(t){var e=this,i=new FileReader;i.onerror=function(){return e.iscUploadFailed("Error in reading the selected file.")},i.onload=function(){ce.postImport(e.id,i.result).catch((function(t){window.console.log("data returned ERROR "+t.response.data),e.importConfigUploadFailed(t.response.data)})).then((function(){return e.importConfigUploaded()}))},i.readAsText(t[0])},importConfigUploaded:function(){var t=this;this.updateData().then((function(){t.uploaderDialog=!1})),this.importNotify()},importConfigUploadFailed:function(t){this.uploaderError=t},duplicateItemNotify:function(){this.$q.notify(Yt["Notifications"].qNotificationHtmlObj(Yt["Notifications"].notificationHtmlMsg(Kt(this.selectedItem.name))))},importNotify:function(){this.$q.notify(Yt["Notifications"].qNotificationHtmlObj(Yt["Notifications"].notificationHtmlMsg(Jt(this.selectedItem.name))))}})},le=oe,ue=i("9c40"),de=i("4e73"),pe=i("1c1c"),fe=i("4074"),me=i("24e8"),ve=i("f09f"),he=i("a370"),ge=i("4b7e"),be=i("54e1"),_e=i("ee89"),ye=i("7f67"),Ie=Object(N["a"])(le,re,se,!1,null,null,null),Ce=Ie.exports;Q()(Ie,"components",{QBtn:ue["a"],QMenu:de["a"],QList:pe["a"],QItem:R["a"],QItemSection:fe["a"],QTooltip:ot["a"],QDialog:me["a"],QCard:ve["a"],QCardSection:he["a"],QIcon:G["a"],QCardActions:ge["a"],QSeparator:ie["a"],QBanner:be["a"],QUploader:_e["a"]}),Q()(Ie,"directives",{ClosePopup:ye["a"]});var Te=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"column q-gutter-md"},[i("q-card",{staticClass:"card-selected",attrs:{"data-cy":"card-"+t.GATT_TYPES.profile}},[i("div",{staticClass:"row items-center q-gutter-sm q-pt-md"},[i("div",{staticClass:"col-auto"},[i("div",{staticClass:"card-title-block-bar"})]),i("q-icon",{attrs:{name:t.ICONS[t.GATT_TYPES.profile].name,color:t.ICONS[t.GATT_TYPES.profile].color,size:"lg"}}),i("div",{staticClass:"card-title-div"},[i("div",{staticClass:"card-title"},[t._v("\n          "+t._s(t.name)+"\n        ")]),i("em",{staticClass:"text-capitalize card-subtitle"},[t._v("\n          "+t._s(t.GATT_TYPES.profile)+"\n        ")])]),i("div",{staticClass:"col row justify-end items-center q-px-md"},[i("q-btn",{attrs:{icon:"mdi-help",color:"blue",round:"",dense:"",unelevated:"",size:"sm","data-cy":"card-help"},on:{click:function(e){return t.goToMarkdownId("profile")}}})],1)],1),i("div",{staticClass:"row q-pa-md q-col-gutter-md"},[i("div",{staticClass:"column q-col-gutter-md col-md-8 col-sm-12",staticStyle:{"max-width":"350px"}},[i("q-input",t._b({attrs:{label:t.PROFILE_META.name.label,"data-cy":"input-name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},"q-input",t.INPUT_PROPS,!1)),i("VToggle",t._b({attrs:{label:t.PROFILE_META.generic_attribute_service.label,"validation-messages":t.genericAttributeServiceValMsgs,"data-cy":"input-generic-attribute-service"},model:{value:t.generic_attribute_service,callback:function(e){t.generic_attribute_service=e},expression:"generic_attribute_service"}},"VToggle",t.INPUT_PROPS,!1)),i("VToggle",t._b({attrs:{label:t.PROFILE_META.gatt_caching.label,"validation-messages":t.gattCachingValMsgs,"data-cy":"input-gatt-caching"},model:{value:t.gatt_caching,callback:function(e){t.gatt_caching=e},expression:"gatt_caching"}},"VToggle",t.INPUT_PROPS,!1))],1),i("div",{staticClass:"self-start"},[i("CapabilityDeclarations")],1),i("div",{staticClass:"col-12"},[i("div",{staticClass:"row q-col-gutter-sm"},t._l(t.mergedGatt.services,(function(t){return i("div",{key:t.vueId,staticClass:"col-grow"},[i("SubGattItem",{attrs:{value:t}})],1)})),0)])])])],1)},we=[],Se=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-list",{staticClass:"rounded-borders sub-item-background"},[i("q-item",{staticClass:"rounded-borders q-pr-sm",attrs:{clickable:""},on:{click:function(e){return t.setSelectedItem(t.value)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:t.ICONS[t.value.gatt_type].name,color:t.ICONS[t.value.gatt_type].color,size:"lg"}})],1),i("q-item-section",[i("q-item-label",[i("strong",[t._v(t._s(t.value.name))]),t.value.id?i("em",[t._v(t._s(" - "+t.value.id))]):t._e()]),i("q-item-label",{staticClass:"q-gutter-xs",attrs:{caption:""}},[""!=t.value.uuid?i("q-badge",{attrs:{color:"accent"}},[t._v("\n          "+t._s(t.value.uuid)+"\n        ")]):t._e(),""!=t.value.type?i("q-badge",{attrs:{color:"primary"}},[t._v("\n          "+t._s(t.value.type)+"\n        ")]):t._e(),null==t.value.source_file?i("q-badge",{staticClass:"text-primary",attrs:{color:"transparent"}},[i("q-icon",{staticClass:"q-pr-xs",attrs:{name:"mdi-pencil"}}),t._v("\n          Edit\n        ")],1):t._e()],1)],1)],1),t.value.children&&0!=t.value.children.length?i("q-item",{staticClass:"sub-item-background"},[i("div",{staticClass:"row"},t._l(t.value.children,(function(e){return i("q-chip",{key:e.vueId,staticClass:"chip-background",attrs:{dense:"",clickable:""},on:{click:function(i){return t.setSelectedItem(e)}}},[i("q-avatar",{attrs:{color:t.ICONS[e.gatt_type].color,"text-color":"white"}},[t._v("\n          "+t._s(e.gatt_type[0].toUpperCase())+"\n        ")]),t._v("\n        "+t._s(e.name)+"\n        "),null==t.value.source_file?i("q-badge",{staticClass:"text-primary",attrs:{color:"transparent"}},[i("q-icon",{staticClass:"q-px-sm",attrs:{name:"mdi-pencil"}}),t._v("\n          Edit\n        ")],1):t._e()],1)})),1)]):t._e()],1)},Ee=[],Oe={namespaced:!0,props:{value:{type:Object,required:!0}},data:function(){return{ICONS:E}},methods:m()({},Object(g["mapActions"])("GattConfiguratorApp",["setSelectedItem"]))},qe=Oe,Ae=(i("8c66"),i("0170")),ke=i("58a81"),xe=i("b047"),Pe=i("cb32"),Me=Object(N["a"])(qe,Se,Ee,!1,null,null,null),De=Me.exports;Q()(Me,"components",{QList:pe["a"],QItem:R["a"],QItemSection:fe["a"],QIcon:G["a"],QItemLabel:Ae["a"],QBadge:ke["a"],QChip:xe["a"],QAvatar:Pe["a"]});var Ve=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-markup-table",{class:{"alert-error-border":"error"==t.validationMessages.type,"alert-warning-border":"warning"==t.validationMessages.type},attrs:{flat:"",bordered:"",dense:""}},[i("thead",[i("tr",[i("th",{staticClass:"text-left text-h6",attrs:{colspan:"1",scope:"col"}},[t._v("\n        "+t._s(t.PROFILE_META.capability_declarations.label)+"\n      ")]),i("th",{staticClass:"text-right",attrs:{colspan:"2",scope:"colgroup"}},[i("q-btn",t._b({attrs:{round:!1,"no-caps":"",color:"primary","data-cy":"add-capability-declaration"},on:{click:t.addCapabilityDeclaration}},"q-btn",t.ICON_BUTTON_PROPS,!1),[i("q-icon",{attrs:{name:"mdi-plus-thick",size:"xs"}}),t._v("Add\n        ")],1)],1),i("th",{attrs:{scope:"col"}},[i("ValidationMarker",t._b({attrs:{placeholder:""}},"ValidationMarker",t.validationMessages,!1))],1)]),i("tr",{directives:[{name:"show",rawName:"v-show",value:!!t.mergedGatt.capability_declarations.length,expression:"!!mergedGatt.capability_declarations.length"}]},[i("th",{attrs:{scope:"col"}},[t._v("\n        "+t._s(t.PROFILE_META.capability_declarations.column_labels.name)+"\n      ")]),i("th",{attrs:{scope:"col"}},[t._v("\n        "+t._s(t.PROFILE_META.capability_declarations.column_labels.enable)+"\n      ")]),i("th",{attrs:{scope:"col"}}),i("th",{attrs:{scope:"col"}})])]),i("tbody",t._l(t.mergedGatt.capability_declarations,(function(e,a){return i("CapabilityDeclarationRow",{key:a,attrs:{capability_declaration:e,"data-cy":"capability-declaration"},on:{delete:function(e){return t.removeArrayItem({array_object:t.gatt.capability_declarations,index:a})}}})})),1)])},Ne=[],Ge=(i("4de4"),i("eca4")),Re=i("dbdd"),je=(i("2b3d"),i("ff52")),Ue=i("c4d0"),Qe=function(t){var e=new URL(window.location.href),i=e.searchParams.get("id");function a(e){var i="ws://"+window.location.host+"/ws/gattConfigurator/"+e,a={onmessage:function(i){var a=i.data;if(Ot["default"].info("Message received: "+a),"save"==a)ce.postSave({id:e,data:new At(t.getters["GattConfiguratorApp/gatt"])}),t.dispatch("MainView/setDirty",!1,{root:!0});else if("themeDark"==a)je["a"].set(!0);else if("themeLight"==a)je["a"].set(!1);else try{var n=JSON.parse(a);if("addServiceContribution"==n.method){var r=n.params.source_file,s=new jt(m()(m()({},n.params.gatt),{},{source_file:r}));t.dispatch("GattConfiguratorApp/addContribution",{source_file:r,gatt:s})}else"removeServiceContribution"==n.method&&t.dispatch("GattConfiguratorApp/removeContribution",n.params.source_file)}catch(c){Ot["default"].error(c.message)}}};return new Ue["WebSocketWrapper"](i,a)}function n(e){Ot["default"].info("ID: "+e),t.dispatch("MainView/setId",e,{root:!0}),ce.getData(e).then((function(i){Ot["default"].info("Studio data:"),Ot["default"].info(i,!0),Ot["default"].info("Server: "+window.location.host),a(e).connect(),t.dispatch("MainView/setData",i)})),ce.getContributions(e).then((function(e){t.dispatch("MainView/setContributions",e)})),t.watch((function(){return t.getters["MainView/dirty"]}),(function(i){i&&ce.setDirty(e).then((function(e){"ok"!=e&&t.dispatch("MainView/setDirty",!1)}))}))}ce.getMarkDown().then((function(e){t.dispatch("Markdown/setMarkdownContent",e,{root:!0})})),i?n(i):(ce.getDataMock().then((function(e){Ot["default"].info("Mock data:"),Ot["default"].info(e,!0),t.dispatch("MainView/setData",e,{root:!0})})),ce.getContributionsMock().then((function(e){Ot["default"].info("Mock contribute:"),Ot["default"].info(e,!0),t.dispatch("MainView/setContributions",e)}))),window.DarkToggle=function(){je["a"].toggle()}},Le=Qe,$e={id:"none",dirty:!1,ready:!1,sigLayout:!1,dialogOn:!1},Be={id:function(t){return t.id},ready:function(t){return t.ready},dirty:function(t){return t.dirty},sigLayout:function(t){return t.sigLayout},dialogOn:function(t){return t.dialogOn}},Ye={setId:function(t,e){var i=t.commit;i("SET_ID",e)},setReady:function(t,e){var i=t.commit;i("SET_READY",e)},setDirty:function(t,e){var i=t.commit,a=t.state;a.dirty!=e&&i("SET_DIRTY",e)},setSigLayout:function(t,e){var i=t.commit;i("SET_SIG_LAYOUT",e)},setDialogOn:function(t,e){var i=t.commit;i("SET_DIALOG_ON",e)},setData:function(t,e){var i=t.commit,a=t.dispatch,n=new jt(e);null!=n.upgrade_results&&n.upgrade_results.length>0&&(i("SET_DIRTY",!0),i("UpgradeRule/SET_UPGRADE_DIALOG_ON",!0,{root:!0})),i("GattConfiguratorApp/SET_GATT",n,{root:!0}),i("GattConfiguratorApp/SET_SELECTED_ITEM",n,{root:!0}),i("SET_READY",!0),a("setSigTreeData")},setContributions:function(t,e){var i=t.dispatch;for(var a in e)if(e[a]){var n=new jt(m()(m()({},e[a]),{},{source_file:a}));i("GattConfiguratorApp/addContribution",{source_file:a,gatt:n},{root:!0})}},updateData:function(t){var e=t.commit,i=t.getters,a=t.dispatch;ce.getData(i.id).then((function(t){0!=t.length&&(e("SET_DIRTY",!0),a("setData",t))}))},setSigTreeData:function(t){var e=t.getters,i=t.dispatch;"none"!=e.id?(Ot["default"].time("sig"),ce.getSigTreeData(e.id).then((function(t){0!=t.length&&(i("Sig/setSigTreeData",t,{root:!0}),Ot["default"].timeEnd("sig"))}))):(Ot["default"].time("sig"),ce.getSigTreeDataMock().then((function(t){0!=t.length&&(i("Sig/setSigTreeData",t,{root:!0}),Ot["default"].timeEnd("sig"))})))}},Fe={SET_ID:function(t,e){t.id=e},SET_READY:function(t,e){t.ready=e},SET_DIRTY:function(t,e){t.dirty=e},SET_SIG_LAYOUT:function(t,e){t.sigLayout=e},SET_DIALOG_ON:function(t,e){t.dialogOn=e}},ze={namespaced:!0,state:$e,getters:Be,actions:Ye,mutations:Fe},We=(i("0481"),i("970b")),He=i.n(We),Ke=i("5bc3"),Je=i.n(Ke),Ze=function(){function t(){He()(this,t),this._idSet=new Set,this._duplicatedIdSet=new Set}return Je()(t,[{key:"visit",value:function(t){t.hasOwnProperty("id")&&null!=t.id&&(this._idSet.has(t.id)?this._duplicatedIdSet.add(t.id):this._idSet.add(t.id))}},{key:"getDuplicatedIds",value:function(){return this._duplicatedIdSet}}]),t}();function Xe(t,e){if(t.children&&e.children){var i,a=t.children,n=e.children,r=z()(a);try{var s=function(){var t=i.value;if(t.instance_id){var a=n.findIndex((function(e){return e.instance_id==t.instance_id}));if(-1!=a)return Xe(t,n[a]),"continue"}t.parent=e,n.push(t)};for(r.s();!(i=r.n()).done;)s()}catch(c){r.e(c)}finally{r.f()}}}var ti={gatt:null,contributions:{},selectedItem:null},ei={gatt:function(t){return t.gatt},selectedItem:function(t){return t.selectedItem},itemByVueId:function(t,e){return function(i){if(t.gatt.vueId==i)return t.gatt;var a,n=z()(e.mergedGatt.services);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(r.vueId==i)return r;var s,c=z()(r.characteristics);try{for(c.s();!(s=c.n()).done;){var o=s.value;if(o.vueId==i)return o;var l,u=z()(o.descriptors);try{for(u.s();!(l=u.n()).done;){var d=l.value;if(d.vueId==i)return d}}catch(p){u.e(p)}finally{u.f()}}}catch(p){c.e(p)}finally{c.f()}}}catch(p){n.e(p)}finally{n.f()}}},serviceContributions:function(t){Ot["default"].debug("contributions"),Ot["default"].debug(t.contributions,!0);var e,i=new jt,a=z()(Object.keys(t.contributions).sort());try{for(a.s();!(e=a.n()).done;){var n=e.value;Xe(new jt(t.contributions[n]),i)}}catch(r){a.e(r)}finally{a.f()}return i.services.forEach((function(e){return e.parent=t.gatt})),i.services},capabilityContributions:function(t){for(var e=Object.keys(t.contributions).sort().map((function(e){return t.contributions[e].capability_declarations})).flat(),i=function(t){e.findIndex((function(i){return i.name==e[t].name}))!=t&&e.splice(t,1)},a=e.length-1;a>=0;a--)i(a);return e},mergedGatt:function(t,e){var i=[].concat(H()(t.gatt.services),H()(e.serviceContributions)),a=[].concat(H()(t.gatt.capability_declarations),H()(e.capabilityContributions));return Object.assign(new jt,m()(m()({},t.gatt),{},{services:i,children:i,capability_declarations:a}))},serviceIds:function(t,e){return[].concat(H()(t.gatt.services),H()(e.serviceContributions)).map((function(t){return t.id})).filter((function(t){return!!t}))},duplicatedIds:function(t,e){var i=new Ze;return e.mergedGatt.accept(i),i.getDuplicatedIds()},capabilityDeclarationNames:function(t,e){return[].concat(H()(t.gatt.capability_declarations),H()(e.capabilityContributions)).map((function(t){return t.name}))}},ii={setSelectedItem:function(t,e){var i=t.commit;i("SET_SELECTED_ITEM",e)},setGatt:function(t,e){var i=t.commit;i("SET_GATT",e)},setValue:function(t,e){var i=t.commit,a=t.dispatch;i("SET_VALUE",e),a("MainView/setDirty",!0,{root:!0})},setValueNoDirty:function(t,e){var i=t.commit;i("SET_VALUE",e)},setChildren:function(t,e){var i=t.commit,a=t.dispatch;i("SET_CHILDREN",e),a("MainView/setDirty",!0,{root:!0})},removeSelectedItem:function(t){var e=t.commit,i=t.dispatch;e("REMOVE_SELECTED_ITEM"),i("MainView/setDirty",!0,{root:!0})},duplicateSelectedItem:function(t){var e=t.commit,i=t.dispatch;e("DUPLICATE_SELECTED_ITEM"),i("MainView/setDirty",!0,{root:!0})},moveUpSelectedItem:function(t){var e=t.commit,i=t.dispatch;e("MOVE_UP_SELECTED_ITEM"),i("MainView/setDirty",!0,{root:!0})},moveDownSelectedItem:function(t){var e=t.commit,i=t.dispatch;e("MOVE_DOWN_SELECTED_ITEM"),i("MainView/setDirty",!0,{root:!0})},addGattItem:function(t,e){var i=t.commit,a=t.dispatch;i("ADD_GATT_ITEM",e),a("MainView/setDirty",!0,{root:!0})},addContribution:function(t,e){var i=t.commit,a=e.source_file,n=e.gatt;i("ADD_CONTRIBUTION",{source_file:a,gatt:n})},removeContribution:function(t,e){var i=t.commit;i("REMOVE_CONTRIBUTION",e)},addArrayItem:function(t,e){var i=t.commit,a=t.dispatch;i("ADD_ARRAY_ITEM",e),a("MainView/setDirty",!0,{root:!0})},removeArrayItem:function(t,e){var i=t.commit,a=t.dispatch;i("REMOVE_ARRAY_ITEM",e),a("MainView/setDirty",!0,{root:!0})},maintainCapabilities:function(t,e){var i=t.commit,a=t.getters;i("MAINTAIN_CAPABILITIES",m()({capabilityDeclarationNames:a.capabilityDeclarationNames},e))},maintainServiceIncludes:function(t,e){var i=t.commit,a=t.getters;i("MAINTAIN_SERVICE_INCLUDES",m()({serviceIds:a.serviceIds},e))}},ai={SET_GATT:function(t,e){t.gatt=e},SET_SELECTED_ITEM:function(t,e){t.selectedItem=e},SET_VALUE:function(t,e){var i=e.object,a=e.key,n=e.value;i[a]=n},SET_CHILDREN:function(t,e){var i=e.object,a=e.children;i.children=a},REMOVE_SELECTED_ITEM:function(t){if(t.selectedItem["parent"]){var e=t.selectedItem.parent,i=e.children,a=i.indexOf(t.selectedItem),n=i.length-1;t.selectedItem=0==n?e:a<n?i[a+1]:i[a-1],i.splice(a,1)}},DUPLICATE_SELECTED_ITEM:function(t){var e=t.selectedItem.parent,i=e.children;function a(t,e){return"source_file"===t||"parent"===t?void 0:e}var n=JSON.parse(JSON.stringify(t.selectedItem,a));switch(t.selectedItem.gatt_type){case C.service:i.push(new Qt(m()(m()({},n),{},{parent:e})));break;case C.characteristic:i.push(new Lt(m()(m()({},n),{},{parent:e})));break;case C.descriptor:i.push(new $t(m()(m()({},n),{},{parent:e})));break;default:break}},MOVE_UP_SELECTED_ITEM:function(t){var e=t.selectedItem,i=e.parent.children,a=i.indexOf(e);a>0&&(i.splice(a,1),i.splice(a-1,0,e))},MOVE_DOWN_SELECTED_ITEM:function(t){var e=t.selectedItem,i=e.parent.children,a=i.indexOf(e);a+1<i.length&&(i.splice(a,1),i.splice(a+1,0,e))},ADD_GATT_ITEM:function(t,e){var i=e.gattType,a=e.gattItem;if(null!=i)if(null!=a){Zt(i,a);var n=t.gatt,r=t.selectedItem;switch(i){case C.profile:var s,c=z()(a.services);try{for(c.s();!(s=c.n()).done;){var o=s.value;n.services.push(new Qt(m()(m()({},o),{},{parent:n})))}}catch(l){c.e(l)}finally{c.f()}break;case C.service:n.services.push(new Qt(m()(m()({},a),{},{parent:n})));break;case C.characteristic:if(null!=r.source_file)break;switch(r.gatt_type){case C.profile:0==n.services.length&&n.services.push(new Qt({parent:n})),n.services[0].characteristics.push(new Lt(m()(m()({},a),{},{parent:n.services[0]})));break;case C.service:r.characteristics.push(new Lt(m()(m()({},a),{},{parent:r})));break;case C.characteristic:r.parent.characteristics.push(new Lt(m()(m()({},a),{},{parent:r.parent})));break;case C.descriptor:r.parent.parent.characteristics.push(new Lt(m()(m()({},a),{},{parent:r.parent.parent})));break}break;case C.descriptor:if(null!=r.source_file)break;switch(r.gatt_type){case C.profile:0==n.services.length&&n.services.push(new Qt({parent:n})),0==n.services[0].characteristics.length&&n.services[0].characteristics.push(new Lt({parent:n.services[0]})),n.services[0].characteristics[0].descriptors.push(new $t(m()(m()({},a),{},{parent:n.services[0].characteristics[0]})));break;case C.service:0==r.characteristics.length&&r.characteristics.push(new Lt({parent:r})),r.characteristics[0].descriptors.push(new $t(m()(m()({},a),{},{parent:r.characteristics[0]})));break;case C.characteristic:r.descriptors.push(new $t(m()(m()({},a),{},{parent:r})));break;case C.descriptor:r.parent.descriptors.push(new $t(m()(m()({},a),{},{parent:r.parent})));break}break}}else Ot["default"].error("SIG Gatt item is null");else Ot["default"].error("Gatt type is null")},ADD_CONTRIBUTION:function(t,e){var i=e.source_file,a=e.gatt;a.services.forEach((function(e){e.parent=t.gatt})),r["default"].set(t.contributions,i,a)},REMOVE_CONTRIBUTION:function(t,e){r["default"].delete(t.contributions,e)},ADD_ARRAY_ITEM:function(t,e){var i=e.array_object,a=e.item;i.push(a)},REMOVE_ARRAY_ITEM:function(t,e){var i=e.array_object,a=e.index;i.splice(a,1)},MAINTAIN_CAPABILITIES:function(t,e){var i=e.capabilityDeclarationNames,a=e.oldVal,n=void 0===a?null:a,r=e.newVal,s=void 0===r?null:r;t.gatt.accept({visit:function(t){if(t.capabilities){if(n&&s){var e=t.capabilities.indexOf(n);-1!==e&&(t.capabilities[e]=s)}t.gatt_type==C.characteristic&&t.parent.capabilities.length>0?t.capabilities=t.capabilities.filter((function(e){return t.parent.capabilities.includes(e)})):t.capabilities=t.capabilities.filter((function(t){return i.includes(t)}))}}})},MAINTAIN_SERVICE_INCLUDES:function(t,e){var i,a=e.serviceIds,n=e.oldVal,r=void 0===n?null:n,s=e.newVal,c=void 0===s?null:s,o=z()(t.gatt.services);try{for(o.s();!(i=o.n()).done;){var l=i.value;if(r&&c){var u=l.includes.indexOf(r);-1!==u&&(l.includes[u]=c)}l.includes=l.includes.filter((function(t){return a.includes(t)}))}}catch(d){o.e(d)}finally{o.f()}}},ni={namespaced:!0,state:ti,getters:ei,actions:ii,mutations:ai};i("a630"),i("25f0");function ri(t){var e=this,i=t.name,a=t.type,n=t.source,r=void 0===n?null:n,s=t.services,c=void 0===s?[]:s;this.name=i,this.type=a,this.source=r,this.services=c.map((function(t){return new si(t,e)})),this.vueId=Object(qt["a"])(),this.children=this.services,this.services.forEach((function(t){return t["vueId"]=Object(qt["a"])()}))}function si(t){var e=this,i=t.name,a=t.type,n=t.source,r=void 0===n?null:n,s=t.characteristics,c=void 0===s?[]:s,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.name=i,this.type=a,this.source=r,this.characteristics=c.map((function(t){return new ci(t,e)})),this.vueId=Object(qt["a"])(),this.parent=o,this.children=this.characteristics}function ci(t){var e=this,i=t.name,a=t.type,n=t.source,r=void 0===n?null:n,s=t.descriptors,c=void 0===s?[]:s,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.name=i,this.type=a,this.source=r,this.descriptors=c.map((function(t){return new oi(t,e)})),this.vueId=Object(qt["a"])(),this.parent=o,this.children=this.descriptors}function oi(t){var e=t.name,i=t.type,a=t.source,n=void 0===a?null:a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.name=e,this.type=i,this.source=n,this.vueId=Object(qt["a"])(),this.parent=r}ri.prototype.gatt_type=C.profile,si.prototype.gatt_type=C.service,ci.prototype.gatt_type=C.characteristic,oi.prototype.gatt_type=C.descriptor;var li={sigTreeData:null,draggedItemPromise:null},ui={sigTreeData:function(t){return t.sigTreeData},draggedItemPromise:function(t){return t.draggedItemPromise},sources:function(t){for(var e=new Set,i=0,a=Object.values(t.sigTreeData);i<a.length;i++){var n,r=a[i],s=z()(r);try{for(s.s();!(n=s.n()).done;){var c=n.value;e.add(c.source)}}catch(o){s.e(o)}finally{s.f()}}return Array.from(e)}},di={setSigTreeData:function(t,e){var i=t.commit,a={profiles:e.profiles.map((function(t){return new ri(t)})),services:e.services.map((function(t){return Xt(t),new si(t)})),characteristics:e.characteristics.map((function(t){return new ci(t)})),descriptors:e.descriptors.map((function(t){return new oi(t)}))};Ot["default"].info("setSigTreeData");var n="setSigTreeData:\n        SIG profiles: "+a.profiles.length.toString()+"\n        SIG services: "+a.services.length.toString()+"\n        SIG characteristics: "+a.characteristics.length.toString()+"\n        SIG descriptors: "+a.descriptors.length.toString();Ot["default"].info(n),i("SET_SIG_TREE_DATA",a)},setDraggedItemPromise:function(t,e){var i=t.commit;i("SET_DRAGGED_ITEM_PROMISE",e)}},pi={SET_SIG_TREE_DATA:function(t,e){t.sigTreeData=e},SET_DRAGGED_ITEM_PROMISE:function(t,e){t.draggedItemPromise=e}},fi={namespaced:!0,state:li,getters:ui,actions:di,mutations:pi},mi=i("f174"),vi=i.n(mi);r["default"].use(g["default"]),r["default"].use(vi.a);var hi=new g["default"].Store({modules:{Markdown:Re["WaspMarkdownStore"],UpgradeRule:Ge["UpgradeRule"],MainView:ze,GattConfiguratorApp:ni,Sig:fi},plugins:[Le],strict:!1}),gi=hi;i("fb6a");function bi(t){return Object.values(t).some((function(t){return!!t}))}function _i(){this.isValueLengthNotNull=new oa(Xi,"Calculated length, Initial Value's length will be used.",["value_$_length"],Yi),this.isValueHexLengthValid=new oa(ta,"Value length is greater than the length (*2) property. Value will be truncated.",["value_$_init_value","value_$_length"],Fi),this.isValidInitialValueHexForm=new oa(ea,"Value is not a proper hex! Digit count has to be even.",["value_$_init_value"],Bi),this.isValidValueLength=new oa(ea,"Value is not a positive integer!",["value_$_length"],zi),this.isNoneUserTypeValueMaxLengthValid=new oa(ea,"Value length for NONE USER types should be between 0-255",["value_$_length"],Hi),this.isValueUTF8LengthValid=new oa(ta,"Initial Value length is greater than the length property. Value will be truncated.",["value_$_init_value","value_$_length"],Ki),this.isValueHEXMinLengthValid=new oa(Xi,"Initial Value length is less than the length property. Padding data will be added.",["value_$_init_value","value_$_length"],Ji),this.isValueUTF8MinLengthValid=new oa(Xi,"Initial Value length is less than the length property. Padding data will be added.",["value_$_init_value","value_$_length"],Zi),this.hasInitialValueWhenLengthNull=new oa(ea,"Initial Value is compulsory when the length attribute is 0.",["value_$_init_value"],Wi),this.isValidUUID=qi()}function yi(){this.isCapabilityDeclarationNameUnique=new oa(ea,"Capability Declaration names are not unique!",["capability_declarations"],xi),this.isCapabilityDeclarationNameValid=new oa(ea,"Only alphanumeric and '_' characters are allowed.",["capability_declarations"],Pi),this.isNotExceededMaxNoOfCapabilityDeclarations=new oa(ea,"The maximum number of Capabilities is 16.",["capability_declarations"],Mi),this.isGattCachingValueValid=new oa(ta,"GATT Caching only allowed, when Generic Attribute Service is enabled. This setting will be ignored.",["gatt_caching","generic_attribute_service"],Di)}function Ii(){this.isIdUnique=new oa(ea,"Service ID is not unique !",["id"],ki),this.isValidUUID=qi()}function Ci(){Object.assign(this,new _i),this.hasPropertyEnabled=new oa(ea,"At least one property should be configured.",["properties"],Ri),this.propertyForPersmissionIsSelected=new oa(ta,"Property was not selected for permissions",["properties"],Qi),this.isConstantAndWriteEnabledCharacteristic=new oa(ea,"Write properties are not applicable for constant values.",["properties"],Vi),this.isContainsDuplicatedCharacterisitcsDescription=new oa(ta,"Characteristic user description cannot be added while the user description checkbox selected",["description"],Ni),this.isIdUnique=new oa(ea,"Characteristic ID is not unique !",["id"],ki),this.explicitCCCD=new oa(ta,"Note: since there is a CCCD explicitly defined for this characteristic, the notify and indicate properties set in the configurator will be ignored. Remove the explicit definition to get an autogenerated CCCD or remove the notify/indicate properties, and define them inside the explicitly defined CCCD.",["notify"],Gi),this.isValidUUID=qi()}function Ti(){Object.assign(this,new _i),this.hasPropertyEnabled=new oa(ea,"At least one property should be configured.",["properties"],Ri),this.propertyForPersmissionIsSelected=new oa(ta,"Property was not selected for permissions",["properties"],ji),this.isConstantAndWriteEnabledDescriptor=new oa(ea,"Write properties are not applicable for constant values.",["properties"],$i),this.descriptorDuplicationValidator=new oa(ta,"The descriptor is duplicated, which is not allowed by Bluetooth Core specification",["uuid"],Ui),this.isIdUnique=new oa(ea,"Descriptor ID is not unique",["id"],ki)}function wi(t){var e=/^[0-9a-f]{4}$/i,i=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i,a=/^[0-9a-f]{32}$/i;return e.test(t)||i.test(t)||a.test(t)}function Si(t){var e=/^([0-9a-f]{2})+$/gim;return e.test(t)}function Ei(t){var e=/^(0|[1-9]\d*)$/gim;return e.test(t)}function Oi(t){var e=/^([_a-z][_0-9a-z]*)$/gim;return e.test(t)}var qi=function(){return new oa(ea,"Invalid UUID value. It should be a 16-bit or 128-bit UUID number.",["uuid"],Ai)};function Ai(){return void 0===this.gattItem||void 0===this.gattItem.uuid||this.gattItem.uuid.length>0&&wi(this.gattItem.uuid)}function ki(){var t=this.$store.getters["GattConfiguratorApp/duplicatedIds"];return!t.has(this.gattItem.id)}function xi(){var t=!0,e=this.$store.getters["GattConfiguratorApp/capabilityDeclarationNames"];if(e){var i,a=z()(e);try{var n=function(){var a=i.value;if(e.filter((function(t){return t==a})).length>1)return t=!1,"break"};for(a.s();!(i=a.n()).done;){var r=n();if("break"===r)break}}catch(s){a.e(s)}finally{a.f()}}return t}function Pi(){var t=!0,e=this.$store.getters["GattConfiguratorApp/capabilityDeclarationNames"];if(e){var i,a=z()(e);try{for(a.s();!(i=a.n()).done;){var n=i.value;if(!Oi(n)){t=!1;break}}}catch(r){a.e(r)}finally{a.f()}}return t}function Mi(){var t=!0,e=this.$store.getters["GattConfiguratorApp/capabilityDeclarationNames"];return e&&e.length>16&&(t=!1),t}function Di(){var t=!0;return this.gattItem.gatt_caching&&!this.gattItem.generic_attribute_service&&(t=!1),t}function Vi(){var t=!0;return this.gattItem.value.constant&&bi(this.gattItem.permissions.write.properties)&&(t=!1),t}function Ni(){if(null!=this.gattItem.description&&this.gattItem.descriptors.length>0){var t,e="2901",i=z()(this.gattItem.descriptors);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.uuid===e)return!1}}catch(n){i.e(n)}finally{i.f()}}return!0}function Gi(){var t,e,i,a,n,r;if((null!==(t=this.gattItem.permissions)&&void 0!==t&&null!==(e=t.notify)&&void 0!==e&&null!==(i=e.properties)&&void 0!==i&&i.notify||null!==(a=this.gattItem.permissions)&&void 0!==a&&null!==(n=a.notify)&&void 0!==n&&null!==(r=n.properties)&&void 0!==r&&r.indicate)&&this.gattItem.descriptors.length>0){var s,c="2902",o=z()(this.gattItem.descriptors);try{for(o.s();!(s=o.n()).done;){var l=s.value;if(l.uuid===c)return!1}}catch(u){o.e(u)}finally{o.f()}}return!0}function Ri(){var t=!1;for(var e in this.gattItem.permissions){var i=this.gattItem.permissions[e];if(bi(i.properties)){t=!0;break}}return t}function ji(){return Li(this.gattItem,["read","write"])}function Ui(){var t="2901",e=this.gattItem.parent.descriptors,i=new Set;null!=this.gattItem.parent.description&&i.add(t);var a,n=z()(e);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(i.has(r.uuid))return!1;i.add(r.uuid)}}catch(s){n.e(s)}finally{n.f()}return!0}function Qi(){return Li(this.gattItem,["read","write","notify"])}function Li(t,e){for(var i=!0,a=0;a<e.length;a++){var n=e[a],r=t.permissions[n],s=r.authenticated,c=r.bonded,o=r.encrypted,l=r.properties;if((s||c||o)&&!bi(l)){i=!1;break}}return i}function $i(){var t=!0;return this.gattItem.value.constant&&this.gattItem.permissions.write.properties.write&&(t=!1),t}function Bi(){var t=!0;return"value"in this.gattItem&&"type"in this.gattItem["value"]&&"length"in this.gattItem["value"]&&"init_value"in this.gattItem["value"]&&"hex"===this.gattItem["value"]["type"]&&(t=this.gattItem.value.length>0&&0==this.gattItem.value.init_value.length||Si(this.gattItem.value.init_value)),t}function Yi(){return null!=this.gattItem.value.length}function Fi(){var t=!0;if("hex"===this.gattItem["value"]["type"]&&Ei(this.gattItem.value.length)){var e=this.gattItem.value.init_value;e.startsWith("0x")&&(e=e.slice(2)),this.gattItem.value.length>0&&(t=e.length<=2*this.gattItem.value.length)}return t}function zi(){var t=!0;return null!=this.gattItem.value.length&&(t=Ei(this.gattItem.value.length)&&this.gattItem.value.length>0),t}function Wi(){var t=!0;return"user"==this.gattItem.value.type||0!=this.gattItem.value.length&&null!=this.gattItem.value.length||0!=this.gattItem.value.init_value.length||(t=!1),t}function Hi(){var t=!0;return"user"!=this.gattItem.value.type&&this.gattItem.value.length>255&&(t=!1),t}function Ki(){var t=!0;return"utf-8"==this.gattItem.value.type&&this.gattItem.value.length>0&&this.gattItem.value.init_value.length>this.gattItem.value.length&&(t=!1),t}function Ji(){var t=!0;return"hex"==this.gattItem.value.type&&this.gattItem.value.init_value.length<2*this.gattItem.value.length&&(t=!1),t}function Zi(){var t=!0;return"utf-8"==this.gattItem.value.type&&this.gattItem.value.init_value.length<this.gattItem.value.length&&(t=!1),t}var Xi="info",ta="warning",ea="error",ia=[ea,ta,Xi],aa="type",na="validate",ra="message",sa="messageKey",ca="validationMessages";function oa(t,e,i,a){this[aa]=t,this[ra]=e,this[sa]=i,this[na]=a}var la={profile:new yi,service:new Ii,characteristic:new Ci,descriptor:new Ti};function ua(t,e,i){var a=la[t.gatt_type];e in a&&function(){var n=a[e],r=JSON.parse(JSON.stringify(t[ca]));if(i){var s,c=z()(n[sa]);try{for(c.s();!(s=c.n()).done;){var o=s.value;o in r&&(n[aa]in r[o]&&Array.isArray(r[o][n[aa]])&&r[o][n[aa]].length>0&&(r[o][n[aa]]=r[o][n[aa]].filter((function(t){return t!=n[ra]})),0==r[o][n[aa]].length&&delete r[o][n[aa]]),0==Object.keys(r[o]).length&&delete r[o])}}catch(p){c.e(p)}finally{c.f()}}else{var l,u=z()(n[sa]);try{for(u.s();!(l=u.n()).done;){var d=l.value;d in r||(r[d]={}),n[aa]in r[d]||(r[d][n[aa]]=[]),-1==r[d][n[aa]].indexOf(n[ra])&&r[d][n[aa]].push(n[ra])}}catch(p){u.e(p)}finally{u.f()}}gi.dispatch("GattConfiguratorApp/setValueNoDirty",{object:t,key:ca,value:r})}()}function da(t){var e={type:null,messages:[]},i=t;if(void 0!=i&&Object.keys(i).length>0){var a,n=z()(ia);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(r in i){var s,c=z()(i[r]);try{for(c.s();!(s=c.n()).done;){var o=s.value;e.type=r,e.messages.push(o)}}catch(l){c.e(l)}finally{c.f()}if(e.messages.length>0)return e}}}catch(l){n.e(l)}finally{n.f()}}return e}function pa(t){var e={};for(var i in la[t])e[i]={get:la[t][i].validate};return e}var fa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[i("td",{attrs:{"auto-width":""}},[i("FreeStyleInput",{attrs:{disabled:!!t.source_file,"comfort-zone":10,"min-width":"200px"},on:{focus:function(e){t.oldName=t.name},input:function(e){t.active=!0},blur:t.onBlur},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),i("td",{staticClass:"text-center"},[i("q-checkbox",{attrs:{disable:!!t.source_file,dense:""},model:{value:t.enable,callback:function(e){t.enable=e},expression:"enable"}})],1),i("td",[i("q-btn",t._b({attrs:{icon:"mdi-delete",disable:!!t.source_file},on:{click:t.emitDelete}},"q-btn",t.ICON_BUTTON_PROPS,!1))],1),i("td",[t.active?i("ValidationMarker",t._b({attrs:{placeholder:""}},"ValidationMarker",t.validationMessages,!1)):t._e()],1)])},ma=[],va=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("input",t._b({directives:[{name:"autowidth",rawName:"v-autowidth",value:{maxWidth:t.maxWidth,minWidth:t.minWidth,comfortZone:t.comfortZone},expression:"{ maxWidth, minWidth, comfortZone }"}],staticClass:"magic-input",attrs:{type:"text"},domProps:{value:t.value},on:{input:t.onInput,focus:t.onFocus,blur:t.onBlur}},"input",t.$attrs,!1))},ha=[],ga={name:"FreeStyleInput",props:{value:{type:String,required:!0},maxWidth:{type:String,default:"none"},minWidth:{type:String,default:"none"},comfortZone:{type:Number,default:0}},methods:{onInput:function(t){this.$emit("input",t.target.value)},onFocus:function(t){this.$emit("focus",t.target.value)},onBlur:function(t){this.$emit("blur",t.target.value)}}},ba=ga,_a=(i("9633"),Object(N["a"])(ba,va,ha,!1,null,null,null)),ya=_a.exports;function Ia(t,e){var i,a={},n=z()(e);try{var r=function(){var e=i.value;a[e]={get:function(){return this[t][e]},set:function(i){var a=this[t];this.setValue({object:a,key:e,value:i})}}};for(n.s();!(i=n.n()).done;)r()}catch(s){n.e(s)}finally{n.f()}return a}var Ca={components:{FreeStyleInput:ya,ValidationMarker:Ct},props:{capability_declaration:{type:Object,required:!0}},data:function(){return{ICON_BUTTON_PROPS:w,oldName:null,active:!1}},computed:m()(m()(m()({},Ia("capability_declaration",["name","source_file","enable"])),Object(g["mapGetters"])("GattConfiguratorApp",["mergedGatt"])),{},{validationMessages:function(){return da(this.mergedGatt.validationMessages.capability_declarations)}}),methods:m()(m()({},Object(g["mapActions"])("GattConfiguratorApp",["setValue","maintainCapabilities"])),{},{emitDelete:function(){this.$emit("delete")},onBlur:function(){"error"==this.validationMessages.type?this.name=this.oldName:this.maintainCapabilities({oldVal:this.oldName,newVal:this.name}),this.active=!1}})},Ta=Ca,wa=i("8f8e"),Sa=Object(N["a"])(Ta,fa,ma,!1,null,null,null),Ea=Sa.exports;Q()(Sa,"components",{QCheckbox:wa["a"],QBtn:ue["a"]});var Oa={components:{CapabilityDeclarationRow:Ea,ValidationMarker:Ct},data:function(){return{ICON_BUTTON_PROPS:w,PROFILE_META:O,capDecNameTmpOnFocus:null,capDecNameTmpActive:null}},computed:m()(m()({},Object(g["mapGetters"])("GattConfiguratorApp",["gatt","mergedGatt","capabilityDeclarationNames"])),{},{validationMessages:function(){return da(this.mergedGatt.validationMessages.capability_declarations)}}),methods:m()(m()({},Object(g["mapActions"])("GattConfiguratorApp",["addArrayItem","removeArrayItem","maintainCapabilities"])),{},{addCapabilityDeclaration:function(){this.capabilityDeclarationNames.length<16&&this.addArrayItem({array_object:this.gatt.capability_declarations,item:{name:this.freeFeatureName(),enable:!1}})},freeFeatureName:function(){for(var t,e=1;e<=16;e++){var i,a="feature_"+e,n=z()(this.gatt.capability_declarations);try{for(n.s();!(i=n.n()).done;){var r=i.value.name;if(0==a.localeCompare(r)){t=!0;break}t=!1}}catch(s){n.e(s)}finally{n.f()}if(!t)return a}return"feature"}})},qa=Oa,Aa=i("2bb1"),ka=Object(N["a"])(qa,Ve,Ne,!1,null,null,null),xa=ka.exports;Q()(ka,"components",{QMarkupTable:Aa["a"],QBtn:ue["a"],QIcon:G["a"]});var Pa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row justify-between"},[i("q-toggle",t._b({attrs:{"data-cy":t.dataCy},on:{input:t.onInput}},"q-toggle",t.$attrs,!1)),i("ValidationMarker",t._b({attrs:{placeholder:""}},"ValidationMarker",t.validationMessages,!1))],1)},Ma=[],Da={namespaced:!0,components:{ValidationMarker:Ct},props:{validationMessages:{required:!1,type:Object,default:function(){return{type:null,messages:null}}},dataCy:{type:String,required:!0}},methods:{onInput:function(t){this.$emit("input",t)}}},Va=Da,Na=i("9564"),Ga=Object(N["a"])(Va,Pa,Ma,!1,null,null,null),Ra=Ga.exports;Q()(Ga,"components",{QToggle:Na["a"]});var ja={namespaced:!0,components:{SubGattItem:De,CapabilityDeclarations:xa,VToggle:Ra},data:function(){return{PROFILE_META:O,GATT_TYPES:C,INPUT_PROPS:T,ICONS:E}},computed:m()(m()({},Object(g["mapGetters"])("GattConfiguratorApp",["gatt","mergedGatt"])),{},{name:{get:function(){return this.gatt.name},set:function(t){this.setValue({object:this.gatt,key:"name",value:t})}},generic_attribute_service:{get:function(){return this.gatt.generic_attribute_service},set:function(t){this.setValue({object:this.gatt,key:"generic_attribute_service",value:t})}},gatt_caching:{get:function(){return this.gatt.gatt_caching},set:function(t){this.setValue({object:this.gatt,key:"gatt_caching",value:t})}},genericAttributeServiceValMsgs:function(){return da(this.gatt.validationMessages.generic_attribute_service)},gattCachingValMsgs:function(){return da(this.gatt.validationMessages.gatt_caching)}}),methods:m()(m()({},Object(g["mapActions"])("Markdown",["goToMarkdownId"])),Object(g["mapActions"])("GattConfiguratorApp",["setValue"]))},Ua=ja,Qa=i("27f9"),La=Object(N["a"])(Ua,Te,we,!1,null,null,null),$a=La.exports;Q()(La,"components",{QCard:ve["a"],QIcon:G["a"],QBtn:ue["a"],QInput:Qa["a"]});var Ba=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"column q-gutter-md"},t._l(t.mergedGatt.services,(function(e){return i("Service",{key:e.vueId,staticClass:"card",class:{"card-selected":e.vueId==t.selectedItem.vueId},attrs:{id:e.vueId,service:e}})})),1)},Ya=[],Fa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-card",{attrs:{"data-cy":"card-"+t.GATT_TYPES.service}},[i("div",{staticClass:"row items-center q-gutter-sm q-pt-md"},[i("div",{staticClass:"col-auto"},[i("div",{staticClass:"card-title-block-bar"})]),i("q-icon",{attrs:{name:t.ICONS[t.GATT_TYPES.service].name,color:t.ICONS[t.GATT_TYPES.service].color,size:"lg"}}),i("div",{staticClass:"card-title-div"},[i("div",{staticClass:"card-title"},[t._v("\n        "+t._s(t.name)+"\n      ")]),i("em",{staticClass:"text-capitalize card-subtitle"},[t._v("\n        "+t._s(t.GATT_TYPES.service)+"\n      ")])]),i("div",{staticClass:"col row justify-end items-center q-px-md"},[i("q-btn",{attrs:{icon:"mdi-help",color:"blue",round:"",dense:"",unelevated:"",size:"sm","data-cy":"card-help"},on:{click:function(e){return t.goToMarkdownId("services")}}})],1)],1),i("div",{staticClass:"row q-pa-md q-col-gutter-md"},[i("div",{staticClass:"col-grow",staticStyle:{width:"500px"}},[i("div",{staticClass:"row q-col-gutter-md"},[i("q-input",t._b({staticClass:"col-6",attrs:{label:t.SERVICE_META.name.label,"data-cy":"input-name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},"q-input",t.INPUT_PROPS,!1)),i("VInput",t._b({staticClass:"col-6",attrs:{label:t.SERVICE_META.uuid.label,"data-cy":"input-uuid","validation-messages":t.uuidValidationMessages},model:{value:t.uuid,callback:function(e){t.uuid=e},expression:"uuid"}},"VInput",t.INPUT_PROPS,!1)),i("VInput",t._b({staticClass:"col-6",attrs:{label:t.SERVICE_META.id.label,readonly:null==t.id,debounce:0,"validation-messages":t.idValMsgs,"data-cy":"input-id"},on:{focus:function(e){t.serviceIdTmp=t.id},blur:function(){"error"==t.idValMsgs.type?t.id=t.serviceIdTmp:t.maintainServiceIncludes({oldVal:t.serviceIdTmp,newVal:t.service.id})}},scopedSlots:t._u([{key:"prepend",fn:function(){return[i("q-checkbox",{attrs:{dense:"",value:null!=t.service.id,"data-cy":"input-id-enable"},on:{input:function(e){return t.id=e?"":null}}})]},proxy:!0}]),model:{value:t.id,callback:function(e){t.id=e},expression:"id"}},"VInput",t.INPUT_PROPS,!1)),i("q-input",t._b({staticClass:"col-6",attrs:{label:t.SERVICE_META.type.label,"data-cy":"input-type"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},"q-input",t.INPUT_PROPS,!1)),i("q-select",t._b({staticClass:"col-6",attrs:{label:t.SERVICE_META.declaration_type.label,options:t.SERVICE_META.declaration_type.items,"data-cy":"input-declaration-type"},model:{value:t.declaration_type,callback:function(e){t.declaration_type=e},expression:"declaration_type"}},"q-select",t.INPUT_PROPS,!1)),i("div",{staticClass:"col-6 row items-center"},[i("q-toggle",t._b({attrs:{label:t.SERVICE_META.advertise.label,"data-cy":"input-advertise"},model:{value:t.advertise,callback:function(e){t.advertise=e},expression:"advertise"}},"q-toggle",t.INPUT_PROPS,!1))],1),i("q-select",t._b({staticClass:"col-6",attrs:{label:t.SERVICE_META.includes.label,multiple:"",options:t.filteredServiceIds,"use-chips":"","data-cy":"input-includes"},model:{value:t.includes,callback:function(e){t.includes=e},expression:"includes"}},"q-select",t.INPUT_PROPS,!1)),i("q-select",t._b({staticClass:"col-6",attrs:{label:t.SERVICE_META.capabilities.label,multiple:"",options:t.capabilityDeclarationNames,"use-chips":"","data-cy":"input-capabilities"},on:{input:t.maintainCapabilities},model:{value:t.capabilities,callback:function(e){t.capabilities=e},expression:"capabilities"}},"q-select",t.INPUT_PROPS,!1))],1)]),i("div",{staticClass:"col-grow",staticStyle:{width:"300px"}},[i("q-card",{staticClass:"fit",staticStyle:{"min-height":"100px"},attrs:{bordered:"",flat:""}},[i("q-scroll-area",{staticClass:"fit"},[i("q-input",t._b({staticClass:"q-px-sm",attrs:{autogrow:"",outlined:!1,borderless:"",label:t.SERVICE_META.info.label,"data-cy":"input-info"},model:{value:t.info,callback:function(e){t.info=e},expression:"info"}},"q-input",t.INPUT_PROPS,!1))],1)],1)],1),i("div",{staticClass:"col-12"},[i("div",{staticClass:"row q-col-gutter-sm"},t._l(t.service.characteristics,(function(t){return i("div",{key:t.vueId,staticClass:"col-grow"},[i("SubGattItem",{attrs:{value:t}})],1)})),0)])])])},za=[],Wa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-input",t._g(t._b({attrs:{"hide-bottom-space":t.hideBottomSpace,debounce:t.debounce,error:"error"==t.validationMessages.type,"no-error-icon":"","data-cy":t.dataCy},scopedSlots:t._u([t.$slots.prepend?{key:"prepend",fn:function(){return[t._t("prepend")]},proxy:!0}:null,{key:"append",fn:function(){return[i("ValidationMarker",{attrs:{type:t.validationMessages.type,messages:t.validationMessages.messages}})]},proxy:!0}],null,!0)},"q-input",t.$attrs,!1),t.$listeners))},Ha=[],Ka={namespaced:!0,components:{ValidationMarker:Ct},props:{validationMessages:{required:!1,type:Object,default:function(){return{type:"info",messages:[]}}},debounce:{type:Number,default:1e3},hideBottomSpace:{type:Boolean,default:!0},dataCy:{type:String,required:!0}}},Ja=Ka,Za=Object(N["a"])(Ja,Wa,Ha,!1,null,null,null),Xa=Za.exports;Q()(Za,"components",{QInput:Qa["a"]});var tn={components:{SubGattItem:De,VInput:Xa},props:{service:{type:Object,required:!0}},data:function(){return{GATT_TYPES:C,SERVICE_META:q,ICONS:E,INPUT_PROPS:m()(m()({},T),{},{disable:!!this.service.source_file}),serviceIdTmp:null}},computed:m()(m()(m()({},Object(g["mapGetters"])("GattConfiguratorApp",["capabilityDeclarationNames","serviceIds"])),Ia("service",Object.keys(new xt))),{},{filteredServiceIds:function(){var t=this;return this.serviceIds.filter((function(e){return t.service.id!=e}))},idValMsgs:function(){return da(this.service.validationMessages.id)},uuidValidationMessages:function(){return da(this.service.validationMessages.uuid)}}),watch:{serviceIds:function(){}},methods:m()(m()({},Object(g["mapActions"])("Markdown",["goToMarkdownId"])),Object(g["mapActions"])("GattConfiguratorApp",["setValue","maintainServiceIncludes","maintainCapabilities"]))},en=tn,an=i("ddd8"),nn=i("4983"),rn=Object(N["a"])(en,Fa,za,!1,null,null,null),sn=rn.exports;Q()(rn,"components",{QCard:ve["a"],QIcon:G["a"],QBtn:ue["a"],QInput:Qa["a"],QCheckbox:wa["a"],QSelect:an["a"],QToggle:Na["a"],QScrollArea:nn["a"]});var cn=!1,on=!1,ln=!1;function un(t,e){null==t||t.gatt_type!=e||cn||dn(t.vueId)}function dn(t){if(ln)ln=!1;else{var e=document.getElementById(t);if(null!=e){var i=e.offsetTop-10;cn=!0,on=!0,window.scrollTo(0,i),cn=!1}}}function pn(t,e,i){var a,n,r,s,c=t.position;if(cn)return null;if(on)return on=!1,null;switch(e.gatt_type){case C.profile:return;case C.service:a=i.services;break;default:if(null==e["parent"])return null;a=e["parent"].children;break}for(var o in a){var l=a[o],u=document.getElementById(l.vueId);if(null!==u){if(u.offsetTop>=c+300){void 0===n&&(n=l);break}n=l}}return r=document.body.scrollHeight,s=window.scrollY+window.innerHeight,s>=r&&(n=a[a.length-1]),void 0!==n?(ln=!0,setTimeout((function(){ln=!1}),1e3),n):null}var fn={namespaced:!0,components:{Service:sn},computed:m()({},Object(g["mapGetters"])("GattConfiguratorApp",["mergedGatt","selectedItem"])),watch:{selectedItem:function(){this.renderCompleteEvent()}},created:function(){this.renderCompleteEvent()},methods:{renderCompleteEvent:function(){var t=this;this.$nextTick((function(){un(t.selectedItem,C.service)}))}}},mn=fn,vn=Object(N["a"])(mn,Ba,Ya,!1,null,null,null),hn=vn.exports,gn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"column q-gutter-md"},t._l(t.selectedItem.parent.characteristics,(function(e){return i("Characteristic",{key:e.vueId,staticClass:"card",class:{"card-selected":e.vueId==t.selectedItem.vueId},attrs:{id:e.vueId,characteristic:e}})})),1)},bn=[],_n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-card",{attrs:{"data-cy":"card-"+t.GATT_TYPES.characteristic}},[i("div",{staticClass:"row items-center q-gutter-sm q-pt-md"},[i("div",{staticClass:"col-auto"},[i("div",{staticClass:"card-title-block-bar"})]),i("q-icon",{attrs:{name:t.ICONS[t.GATT_TYPES.characteristic].name,color:t.ICONS[t.GATT_TYPES.characteristic].color,size:"lg"}}),i("div",{staticClass:"card-title-div"},[i("div",{staticClass:"card-title"},[t._v("\n        "+t._s(t.name)+"\n      ")]),i("em",{staticClass:"text-capitalize card-subtitle"},[t._v("\n        "+t._s(t.GATT_TYPES.characteristic)+"\n      ")])]),i("div",{staticClass:"col row justify-end items-center q-px-md"},[i("q-btn",{attrs:{icon:"mdi-help",color:"blue",round:"",dense:"",unelevated:"",size:"sm","data-cy":"card-help"},on:{click:function(e){return t.goToMarkdownId("characteristics")}}})],1)],1),i("div",{staticClass:"row q-pa-md q-col-gutter-md"},[i("div",{staticClass:"col-grow",staticStyle:{width:"500px"}},[i("div",{staticClass:"row q-col-gutter-md"},[i("q-input",t._b({staticClass:"col-6",attrs:{label:t.CHARACTERISTIC_META.name.label,"data-cy":"input-name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},"q-input",t.INPUT_PROPS,!1)),i("VInput",t._b({staticClass:"col-6",attrs:{label:t.CHARACTERISTIC_META.uuid.label,"data-cy":"input-uuid","validation-messages":t.uuidValidationMessages},model:{value:t.uuid,callback:function(e){t.uuid=e},expression:"uuid"}},"VInput",t.INPUT_PROPS,!1)),i("VInput",t._b({staticClass:"col-6",attrs:{label:t.CHARACTERISTIC_META.id.label,readonly:null==t.id,"data-cy":"input-id","validation-messages":t.idValidationMessages},scopedSlots:t._u([{key:"prepend",fn:function(){return[i("q-checkbox",{attrs:{dense:"",value:null!=t.id,"data-cy":"input-id-enable"},on:{input:function(e){return t.id=e?"":null}}})]},proxy:!0}]),model:{value:t.id,callback:function(e){t.id=e},expression:"id"}},"VInput",t.INPUT_PROPS,!1)),i("q-input",t._b({staticClass:"col-6",attrs:{label:t.CHARACTERISTIC_META.type.label,"data-cy":"input-type"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},"q-input",t.INPUT_PROPS,!1)),i("div",{staticClass:"col-12"},[i("AttributeValue",{attrs:{"gatt-item":t.characteristic}})],1),i("q-select",t._b({staticClass:"col-6",attrs:{label:t.CHARACTERISTIC_META.capabilities.label,multiple:"",options:t.characteristicCapabilityDeclarationOptions,"use-chips":"","data-cy":"input-capabilities"},model:{value:t.capabilities,callback:function(e){t.capabilities=e},expression:"capabilities"}},"q-select",t.INPUT_PROPS,!1)),i("VInput",t._b({staticClass:"col-6",attrs:{label:t.CHARACTERISTIC_META.description.label,readonly:null==t.description,"data-cy":"input-description","validation-messages":t.descriptionValidationMessages},scopedSlots:t._u([{key:"prepend",fn:function(){return[i("q-checkbox",{attrs:{dense:"",value:null!=t.description,"data-cy":"input-description-enable"},on:{input:function(e){return t.description=e?"":null}}})]},proxy:!0}]),model:{value:t.description,callback:function(e){t.description=e},expression:"description"}},"VInput",t.INPUT_PROPS,!1)),i("div",{staticClass:"col"},[i("PropertySettings",{attrs:{"gatt-item":t.characteristic,disable:!!t.characteristic.source_file}})],1)],1)]),i("div",{staticClass:"col-grow",staticStyle:{width:"300px"}},[i("q-card",{staticClass:"fit",staticStyle:{"min-height":"100px"},attrs:{bordered:"",flat:""}},[i("q-scroll-area",{staticClass:"fit"},[i("q-input",t._b({staticClass:"q-px-sm",attrs:{autogrow:"",outlined:!1,borderless:"",label:t.CHARACTERISTIC_META.info.label,"data-cy":"input-info"},model:{value:t.info,callback:function(e){t.info=e},expression:"info"}},"q-input",t.INPUT_PROPS,!1))],1)],1)],1),i("div",{staticClass:"col-12"},[i("div",{staticClass:"row q-col-gutter-sm"},t._l(t.descriptors,(function(t){return i("div",{key:t.vueId,staticClass:"col-grow"},[i("SubGattItem",{attrs:{value:t}})],1)})),0)])])])},yn=[],In=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-card",{attrs:{bordered:"",flat:""}},[i("div",{staticClass:"row q-col-gutter-sm q-pa-sm"},[i("div",{staticClass:"col-6 text-bold text-primary"},[t._v("\n      Value settings\n    ")]),i("div",{staticClass:"col-6 row items-center"},[i("div",{staticClass:"col-auto"},[i("q-btn-toggle",{staticClass:"btn-toggle",attrs:{size:"sm",dense:"",disable:!!t.gattItem.source_file,unelevated:"","toggle-color":"primary",color:"transparent","text-color":"primary",options:t.VALUE_META.type.items.map((function(t){return{label:t,value:t}})),"data-cy":"input-value-type","data-cy-value":t.type},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}}),i("q-tooltip",[t._v("Value type: "+t._s(t.type))])],1)]),"user"!=t.type?[i("div",{staticClass:"col-6 row items-center"},[i("q-toggle",t._b({attrs:{label:t.VALUE_META.constant.label,"data-cy":"input-constant"},model:{value:t.constant,callback:function(e){t.constant=e},expression:"constant"}},"q-toggle",t.INPUT_PROPS,!1))],1),i("div",{staticClass:"col-6 row items-center"},[i("q-toggle",t._b({attrs:{label:t.VALUE_META.variable_length.label,"data-cy":"input-variable-length"},model:{value:t.variable_length,callback:function(e){t.variable_length=e},expression:"variable_length"}},"q-toggle",t.INPUT_PROPS,!1))],1),i("VInput",t._b({staticClass:"col-6",attrs:{label:t.VALUE_META.init_value.label,"validation-messages":t.initValueValMsgs,"data-cy":"input-init-value",prefix:t.initialValuePrefix},model:{value:t.init_value,callback:function(e){t.init_value=e},expression:"init_value"}},"VInput",t.INPUT_PROPS,!1)),i("VInput",t._b({staticClass:"col-6",attrs:{readonly:!t.length_enable,label:t.VALUE_META.length.label,suffix:t.VALUE_META.length.unit,type:"number","validation-messages":t.valueLengthValMsgs,"data-cy":"input-length"},scopedSlots:t._u([{key:"prepend",fn:function(){return[i("q-checkbox",{attrs:{dense:"","data-cy":"input-length-enable"},model:{value:t.length_enable,callback:function(e){t.length_enable=e},expression:"length_enable"}},[i("q-tooltip",[t._v("Overwrite auto calculated length.")])],1)]},proxy:!0}],null,!1,4045484017),model:{value:t.calculated_length,callback:function(e){t.calculated_length=e},expression:"calculated_length"}},"VInput",t.INPUT_PROPS,!1))]:t._e()],2)])},Cn=[];function Tn(){var t={},e=function(e){t[e]={get:function(){return this.gattItem.value[e]},set:function(t){var i=this.gattItem.value;this.setValue({object:i,key:e,value:t})}}};for(var i in new Vt)e(i);return t}var wn={components:{VInput:Xa},props:{gattItem:{type:Object,required:!0}},computed:m()(m()({},Tn()),{},{length_enable:{get:function(){return null!==this.length},set:function(t){this.length=t?this.calculated_length:null}},calculated_length:{get:function(){return this.length_enable?this.length:Dt(this.type)?this.init_value.replace(/0x/i,"").length/2:this.init_value.length},set:function(t){this.length=t}},initValueValMsgs:function(){return da(this.gattItem.validationMessages.value_$_init_value)},valueLengthValMsgs:function(){return da(this.gattItem.validationMessages.value_$_length)},initialValuePrefix:function(){return Dt(this.type)?"0x":""}}),created:function(){Object.assign(this,{VALUE_META:A,INPUT_PROPS:m()(m()({},T),{},{disable:!!this.gattItem.source_file})})},methods:m()({},Object(g["mapActions"])("GattConfiguratorApp",["setValue"]))},Sn=wn,En=(i("0087"),i("6a67")),On=Object(N["a"])(Sn,In,Cn,!1,null,null,null),qn=On.exports;Q()(On,"components",{QCard:ve["a"],QBtnToggle:En["a"],QTooltip:ot["a"],QToggle:Na["a"],QCheckbox:wa["a"]});var An=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-markup-table",{class:{"alert-error-border":"error"==t.propertiesValidationMessages.type,"alert-warning-border":"warning"==t.propertiesValidationMessages.type},attrs:{flat:"",bordered:"",dense:""}},[i("thead",[i("tr",[i("th",{attrs:{scope:"col"}},[t._v("Properties")]),i("th",{attrs:{scope:"col"}},[t._v("Authenticated")]),i("th",{attrs:{scope:"col"}},[t._v("Bonded")]),i("th",{attrs:{scope:"col"}},[t._v("Encrypted")]),i("th",{attrs:{scope:"col"}},[i("ValidationMarker",t._b({attrs:{placeholder:""}},"ValidationMarker",t.propertiesValidationMessages,!1))],1)])]),i("tbody",t._l(t.gattItem.permissions,(function(e,a){return i("PermissionRow",{key:a,attrs:{permission:e,"gatt-item":t.gattItem,disable:t.disable,"data-cy-row":a}})})),1)])},kn=[],xn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[i("td",[i("div",{staticClass:"column q-gutter-sm"},t._l(t.permission.properties,(function(e,a){return i("q-toggle",t._b({key:a,attrs:{label:t.names[a],"data-cy":"input-enable-"+a,value:e},on:{input:function(e){return t.setPropertyValue(e,a)}}},"q-toggle",t.INPUT_PROPS,!1))})),1)]),i("td",{staticClass:"text-center"},[i("q-checkbox",t._b({attrs:{"data-cy":"input-authenticated"},model:{value:t.authenticated,callback:function(e){t.authenticated=e},expression:"authenticated"}},"q-checkbox",t.INPUT_PROPS,!1))],1),i("td",{staticClass:"text-center"},[i("q-checkbox",t._b({attrs:{"data-cy":"input-bonded"},model:{value:t.bonded,callback:function(e){t.bonded=e},expression:"bonded"}},"q-checkbox",t.INPUT_PROPS,!1))],1),i("td",{staticClass:"text-center"},[i("q-checkbox",t._b({attrs:{"data-cy":"input-encrypted"},model:{value:t.encrypted,callback:function(e){t.encrypted=e},expression:"encrypted"}},"q-checkbox",t.INPUT_PROPS,!1))],1),i("td",["notify"in t.permission.properties?i("ValidationMarker",t._b({attrs:{placeholder:""}},"ValidationMarker",t.notifyValMsgs,!1)):t._e()],1)])},Pn=[],Mn={read:"Read",write:"Write",reliable_write:"Reliable write",write_no_response:"Write without response",notify:"Notify",indicate:"Indicate"},Dn={components:{ValidationMarker:Ct},props:{permission:{type:Object,required:!0},disable:Boolean,gattItem:{type:Object,required:!0}},data:function(){return{INPUT_PROPS:m()(m()({},T),{},{disable:this.disable})}},computed:m()(m()({},Ia("permission",Object.keys(new Rt))),{},{names:function(){return Mn},notifyValMsgs:function(){return da(this.gattItem.validationMessages.notify)}}),watch:{properties:{deep:!0,handler:function(){bi(this.permission.properties)||(this.authenticated=!1,this.bonded=!1,this.encrypted=!1)}},authenticated:function(t){t&&(this.enable=!0)},bonded:function(t){t&&(this.enable=!0)},encrypted:function(t){t&&(this.enable=!0)}},methods:m()(m()({},Object(g["mapActions"])("GattConfiguratorApp",["setValue"])),{},{setPropertyValue:function(t,e){this.setValue({key:e,value:t,object:this.permission.properties})}})},Vn=Dn,Nn=Object(N["a"])(Vn,xn,Pn,!1,null,null,null),Gn=Nn.exports;Q()(Nn,"components",{QToggle:Na["a"],QCheckbox:wa["a"]});var Rn={components:{PermissionRow:Gn,ValidationMarker:Ct},props:{gattItem:{type:Object,required:!0},disable:Boolean},computed:{propertiesValidationMessages:function(){return da(this.gattItem.validationMessages.properties)}}},jn=Rn,Un=Object(N["a"])(jn,An,kn,!1,null,null,null),Qn=Un.exports;Q()(Un,"components",{QMarkupTable:Aa["a"]});var Ln={components:{SubGattItem:De,AttributeValue:qn,PropertySettings:Qn,VInput:Xa},props:{characteristic:{type:Object,required:!0}},data:function(){return{GATT_TYPES:C,CHARACTERISTIC_META:k,ICONS:E,INPUT_PROPS:m()(m()({},T),{},{disable:!!this.characteristic.source_file})}},computed:m()(m()(m()({},Ia("characteristic",Object.keys(new Pt))),Object(g["mapGetters"])("GattConfiguratorApp",["capabilityDeclarationNames"])),{},{characteristicCapabilityDeclarationOptions:function(){var t;return t=this.characteristic.parent.capabilities.length>0?this.characteristic.parent.capabilities:this.capabilityDeclarationNames,t},uuidValidationMessages:function(){return da(this.characteristic.validationMessages.uuid)},descriptionValidationMessages:function(){return da(this.characteristic.validationMessages.description)},idValidationMessages:function(){return da(this.characteristic.validationMessages.id)}}),methods:m()(m()({},Object(g["mapActions"])("Markdown",["goToMarkdownId"])),Object(g["mapActions"])("GattConfiguratorApp",["setValue"]))},$n=Ln,Bn=Object(N["a"])($n,_n,yn,!1,null,null,null),Yn=Bn.exports;Q()(Bn,"components",{QCard:ve["a"],QIcon:G["a"],QBtn:ue["a"],QInput:Qa["a"],QCheckbox:wa["a"],QSelect:an["a"],QScrollArea:nn["a"]});var Fn={namespaced:!0,components:{Characteristic:Yn},computed:m()({},Object(g["mapGetters"])("GattConfiguratorApp",["selectedItem"])),watch:{selectedItem:function(){this.renderCompleteEvent()}},created:function(){this.renderCompleteEvent()},methods:{renderCompleteEvent:function(){var t=this;this.$nextTick((function(){un(t.selectedItem,C.characteristic)}))}}},zn=Fn,Wn=Object(N["a"])(zn,gn,bn,!1,null,null,null),Hn=Wn.exports,Kn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"column q-gutter-md"},t._l(t.selectedItem.parent.descriptors,(function(e){return i("Descriptor",{key:e.vueId,staticClass:"card",class:{"card-selected":e.vueId==t.selectedItem.vueId},attrs:{id:e.vueId,descriptor:e}})})),1)},Jn=[],Zn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-card",{attrs:{"data-cy":"card-"+t.GATT_TYPES.descriptor}},[i("div",{staticClass:"row items-center q-gutter-sm q-pt-md"},[i("div",{staticClass:"col-auto"},[i("div",{staticClass:"card-title-block-bar"})]),i("q-icon",{attrs:{name:t.ICONS[t.GATT_TYPES.descriptor].name,color:t.ICONS[t.GATT_TYPES.descriptor].color,size:"lg"}}),i("div",{staticClass:"card-title-div"},[i("div",{staticClass:"card-title"},[t._v("\n        "+t._s(t.name)+"\n      ")]),i("i",{staticClass:"text-capitalize card-subtitle"},[t._v("\n        "+t._s(t.GATT_TYPES.descriptor)+"\n      ")])]),i("div",{staticClass:"col row justify-end items-center q-px-md"},[i("q-btn",{attrs:{icon:"mdi-help",color:"blue",round:"",dense:"",unelevated:"",size:"sm","data-cy":"card-help"},on:{click:function(e){return t.goToMarkdownId("descriptors")}}})],1)],1),i("div",{staticClass:"row q-pa-md q-col-gutter-md"},[i("div",{staticClass:"col-grow",staticStyle:{width:"500px"}},[i("div",{staticClass:"row q-col-gutter-md"},[i("q-input",t._b({staticClass:"col-6",attrs:{label:t.DESCRIPTOR_META.name.label,"data-cy":"input-name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},"q-input",t.INPUT_PROPS,!1)),i("VInput",t._b({staticClass:"col-6",attrs:{label:t.DESCRIPTOR_META.uuid.label,"data-cy":"input-uuid","validation-messages":t.uuidValidationMessages},model:{value:t.uuid,callback:function(e){t.uuid=e},expression:"uuid"}},"VInput",t.INPUT_PROPS,!1)),i("VInput",t._b({staticClass:"col-6",attrs:{label:t.DESCRIPTOR_META.id.label,readonly:null==t.id,"data-cy":"input-id","validation-messsages":t.idValidationMessages},scopedSlots:t._u([{key:"prepend",fn:function(){return[i("q-checkbox",{attrs:{dense:"",value:null!=t.id,"data-cy":"input-id-enable"},on:{input:function(e){return t.id=e?"":null}}})]},proxy:!0}]),model:{value:t.id,callback:function(e){t.id=e},expression:"id"}},"VInput",t.INPUT_PROPS,!1)),i("q-input",t._b({staticClass:"col-6",attrs:{label:t.DESCRIPTOR_META.type.label,"data-cy":"input-type"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},"q-input",t.INPUT_PROPS,!1)),i("div",{staticClass:"col-12"},[i("AttributeValue",{attrs:{"gatt-item":t.descriptor}})],1),i("div",{staticClass:"col-auto"},[i("PropertySettings",{attrs:{"gatt-item":t.descriptor,disable:!!t.descriptor.source_file}})],1)],1)]),i("div",{staticClass:"col-grow",staticStyle:{width:"250px"}},[i("q-card",{staticClass:"fit",staticStyle:{"min-height":"100px"},attrs:{bordered:"",flat:""}},[i("q-scroll-area",{staticClass:"fit"},[i("q-input",t._b({staticClass:"q-px-sm",attrs:{autogrow:"",outlined:!1,borderless:"",label:t.DESCRIPTOR_META.info.label,"data-cy":"input-info"},model:{value:t.info,callback:function(e){t.info=e},expression:"info"}},"q-input",t.INPUT_PROPS,!1))],1)],1)],1)])])},Xn=[],tr={components:{VInput:Xa,AttributeValue:qn,PropertySettings:Qn},props:{descriptor:{type:Object,required:!0}},data:function(){return{GATT_TYPES:C,DESCRIPTOR_META:x,ICONS:E,INPUT_PROPS:m()(m()({},T),{},{disable:!!this.descriptor.source_file})}},computed:m()(m()(m()({},Ia("descriptor",Object.keys(new Mt))),Object(g["mapGetters"])("GattConfiguratorApp",["gatt"])),{},{uuidValidationMessages:function(){return da(this.descriptor.validationMessages.uuid)},idValidationMessages:function(){return da(this.descriptor.validationMessages.id)}}),methods:m()(m()({},Object(g["mapActions"])("Markdown",["goToMarkdownId"])),Object(g["mapActions"])("GattConfiguratorApp",["setValue"]))},er=tr,ir=Object(N["a"])(er,Zn,Xn,!1,null,null,null),ar=ir.exports;Q()(ir,"components",{QCard:ve["a"],QIcon:G["a"],QBtn:ue["a"],QInput:Qa["a"],QCheckbox:wa["a"],QScrollArea:nn["a"]});var nr={namespaced:!0,components:{Descriptor:ar},computed:m()({},Object(g["mapGetters"])("GattConfiguratorApp",["selectedItem"])),watch:{selectedItem:function(){this.renderCompleteEvent()}},created:function(){this.renderCompleteEvent()},methods:{renderCompleteEvent:function(){var t=this;this.$nextTick((function(){un(t.selectedItem,C.descriptor)}))}}},rr=nr,sr=Object(N["a"])(rr,Kn,Jn,!1,null,null,null),cr=sr.exports,or=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"col row"},[i("div",{staticClass:"col-auto"},[i("q-card",{staticClass:"full-height column"},[i("q-btn-toggle",{attrs:{ripple:!1,"no-caps":"",options:t.tabOptions},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}}),i("q-separator",{staticStyle:{height:"1px"}}),i("div",{staticClass:"col-auto"},[i("q-input",{ref:"filter",staticClass:"q-px-sm",attrs:{borderless:"",dense:"",placeholder:"Filter",debounce:"500"},scopedSlots:t._u([{key:"prepend",fn:function(){return[i("q-icon",{attrs:{name:"mdi-filter-variant"}})]},proxy:!0},{key:"after",fn:function(){return[i("q-btn",t._b({attrs:{icon:"mdi-filter-menu-outline"}},"q-btn",t.ICON_BUTTON_PROPS,!1),[i("q-menu",[i("q-option-group",{staticClass:"q-pa-sm q-gutter-xs",attrs:{options:t.sourceOptions,color:"primary",dense:"",type:"checkbox"},model:{value:t.sourceFilter,callback:function(e){t.sourceFilter=e},expression:"sourceFilter"}})],1),i("q-tooltip",{attrs:{anchor:"center left",self:"center right"}},[t._v("\n                Source filter\n              ")])],1)]},proxy:!0}]),model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}})],1),i("q-separator",{staticStyle:{height:"1px"}}),i("div",{staticClass:"col"},[i("q-scroll-area",{staticClass:"fit"},t._l(t.GATT_TYPES,(function(e){return i("DragTree",{directives:[{name:"show",rawName:"v-show",value:e==t.tab,expression:"type == tab"}],key:e,attrs:{value:t.sigTree[e],"node-key":"vueId","read-only":"",groups:t.groups[e],"drag-options":{sort:!1,clone:t.clone},selected:t.selected},scopedSlots:t._u([{key:"label",fn:function(e){var a=e.node;return[i("div",{staticClass:"row sig-item q-pr-md"},[i("GattTreeItem",{staticClass:"cursor-pointer col",attrs:{value:a},on:{click:function(e){return t.selected=e},mousedown:function(e){return t.preFetchDraggedItem(e)}}}),i("q-btn",{staticClass:"sig-add",attrs:{dense:"",flat:"",icon:"mdi-plus-thick",color:"primary",size:"sm"},on:{click:function(e){return t.addSigItem(a)}}})],1)]}}],null,!0)})})),1)],1)],1)],1),i("div",{staticClass:"q-ml-md col"},[i("q-card",{staticClass:"column full-height"},[null!=t.selected?[i("div",{staticClass:"row items-center q-py-md q-gutter-x-sm sig-info-title-block"},[i("div",{staticClass:"col-auto"},[i("div",{staticClass:"sig-info-title-block-bar"})]),i("q-icon",{attrs:{name:t.ICONS[t.selected.gatt_type].name,color:t.ICONS[t.selected.gatt_type].color,size:"lg"}}),i("div",{staticClass:"card-title-div"},[i("div",{staticClass:"card-title"},[t._v("\n              "+t._s(t.selected.name)+"\n            ")]),i("em",{staticClass:"text-capitalize card-subtitle"},[t._v("\n              "+t._s(t.selected.gatt_type)+"\n            ")])])],1),i("div",[i("q-separator")],1),i("div",{staticClass:"col"},[i("q-scroll-area",{staticClass:"fit q-pa-md"},[i("div",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(t.info))])])],1)]:t._e()],2)],1)])},lr=[],ur=i("7937"),dr=ur["b"].capitalize;function pr(t,e){return t.reduce((function(t,i){if(i.children){var a=pr(i.children,e);if(a.length)return t.push(m()(m()({},i),{},{children:a,gatt_type:i.gatt_type})),t}return i.name.toLowerCase().includes(e)&&t.push(i),t}),[])}function fr(t,e,i){var a=t.filter((function(t){return i.includes(t.source)}));return e&&(a=pr(a,e.toLowerCase())),a}var mr={namespaced:!0,components:{DragTree:at,GattTreeItem:ut},data:function(){var t;return{GATT_TYPES:C,ICON_BUTTON_PROPS:w,ICONS:E,splitterModel:50,tab:C.profile,filterText:"",selected:null,info:"",sourceFilter:null,groups:(t={},I()(t,C.profile,[{name:C.service,pull:"clone",put:!1},{name:C.service,pull:"clone",put:!1}]),I()(t,C.service,[{name:C.service,pull:"clone",put:!1},{name:C.characteristic,pull:"clone",put:!1},{name:C.descriptor,pull:"clone",put:!1}]),I()(t,C.characteristic,[{name:C.characteristic,pull:"clone",put:!1}]),I()(t,C.descriptor,[{name:C.descriptor,pull:"clone",put:!1}]),t)}},computed:m()(m()(m()(m()({},Object(g["mapGetters"])("MainView",["id"])),Object(g["mapGetters"])("Sig",["sigTreeData","sources"])),Object(g["mapGetters"])("GattConfiguratorApp",["selectedItem"])),{},{sourceOptions:function(){return this.sources.map((function(t){return{value:t,label:P.source_labels[t]||t}}))},tabOptions:function(){return Object.keys(C).map((function(t){return{value:t,label:dr(t)+"s"}}))},profiles:function(){return fr(this.sigTreeData.profiles,this.filterText,this.sourceFilter)},services:function(){return fr(this.sigTreeData.services,this.filterText,this.sourceFilter)},characteristics:function(){return fr(this.sigTreeData.characteristics,this.filterText,this.sourceFilter)},descriptors:function(){return fr(this.sigTreeData.descriptors,this.filterText,this.sourceFilter)},sigTree:function(){var t;return t={},I()(t,C.profile,this.profiles),I()(t,C.service,this.services),I()(t,C.characteristic,this.characteristics),I()(t,C.descriptor,this.descriptors),t}}),watch:{selected:function(){this.updateInfo()}},created:function(){this.sourceFilter=this.sources,this.selected=this.sigTree[this.tab][0]},methods:m()(m()(m()({},Object(g["mapActions"])("GattConfiguratorApp",["addGattItem"])),Object(g["mapActions"])("Sig",["setDraggedItemPromise"])),{},{getTypes:function(t){var e=t,i=[];while(e)i.unshift(e.type),e=e.parent;return i},updateInfo:function(){var t=this,e=this.getTypes(this.selected);0!=e.length?ce.getSigInfo(this.id,this.tab,e).then((function(e){t.info=e})).catch((function(e){t.info=e})):this.info=""},addSigItem:function(t){var e=this,i=this.getTypes(t);0!=i.length&&ce.getSigGattItem(this.id,this.tab,i).then((function(t){if(Ot["default"].debug("SIG Gatt item:"),Ot["default"].debug(t,!0),null==e.selectedItem.source_file||null!=e.selectedItem.source_file&&(t.gattType==C.profile||t.gattType==C.service)){e.addGattItem(t);var i=Wt(zt(t));null!=(null===i||void 0===i?void 0:i.title)&&e.$q.notify(Yt["Notifications"].qNotificationHtmlObj(Yt["Notifications"].notificationHtmlMsg(i)))}})).catch((function(t){Ot["default"].error(t)}))},clone:function(t){return{gattType:this.tab,types:this.getTypes(t)}},preFetchDraggedItem:function(t){var e=this.getTypes(t);0!=e.length&&this.setDraggedItemPromise(ce.getSigGattItem(this.id,this.tab,e))}})},vr=mr,hr=(i("b6d9"),i("9f0a")),gr=i("adad"),br=i("823b"),_r=Object(N["a"])(vr,or,lr,!1,null,null,null),yr=_r.exports;Q()(_r,"components",{QCard:ve["a"],QBtnToggle:En["a"],QSeparator:ie["a"],QInput:Qa["a"],QIcon:G["a"],QBtn:ue["a"],QMenu:de["a"],QOptionGroup:hr["a"],QTooltip:ot["a"],QScrollArea:nn["a"],QTabPanels:gr["a"],QTabPanel:br["a"]});i("bfa9");var Ir=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"validator_"+t.gattItem.gatt_type+"_"+t.gattItem.vueId}},t._l(t.gattItem.services,(function(t){return i("ServiceValidators",{key:t.vueId,attrs:{"gatt-item":t}})})),1)},Cr=[],Tr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"validator_"+t.gattItem.gatt_type+"_"+t.gattItem.vueId}},t._l(t.gattItem.characteristics,(function(t){return i("CharacteristicValidators",{key:t.vueId,attrs:{"gatt-item":t}})})),1)},wr=[],Sr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"validator_"+t.gattItem.gatt_type+"_"+t.gattItem.vueId}},t._l(t.gattItem.descriptors,(function(t){return i("DescriptorValidators",{key:t.vueId,attrs:{"gatt-item":t}})})),1)},Er=[],Or=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"validator_"+t.gattItem.gatt_type+"_"+t.gattItem.vueId}})},qr=[],Ar={props:{gattItem:{type:Object,required:!0}},computed:m()({},pa("descriptor")),mounted:function(){var t=this,e=function(e){t.$watch(e,(function(i){ua(t.gattItem,e,i)}),{immediate:!0})};for(var i in this.$options.computed)e(i)}},kr=Ar,xr=Object(N["a"])(kr,Or,qr,!1,null,null,null),Pr=xr.exports,Mr={components:{DescriptorValidators:Pr},props:{gattItem:{type:Object,required:!0}},computed:m()({},pa("characteristic")),mounted:function(){var t=this,e=function(e){t.$watch(e,(function(i){ua(t.gattItem,e,i)}),{immediate:!0})};for(var i in this.$options.computed)e(i)}},Dr=Mr,Vr=Object(N["a"])(Dr,Sr,Er,!1,null,null,null),Nr=Vr.exports,Gr={components:{CharacteristicValidators:Nr},props:{gattItem:{type:Object,required:!0}},computed:m()({},pa("service")),mounted:function(){var t=this,e=function(e){t.$watch(e,(function(i){ua(t.gattItem,e,i)}),{immediate:!0})};for(var i in this.$options.computed)e(i)}},Rr=Gr,jr=Object(N["a"])(Rr,Tr,wr,!1,null,null,null),Ur=jr.exports,Qr={components:{ServiceValidators:Ur},props:{gattItem:{type:Object,required:!0}},computed:m()({},pa("profile")),mounted:function(){var t=this,e=function(e){t.$watch(e,(function(i){ua(t.gattItem,e,i)}),{immediate:!0})};for(var i in this.$options.computed)e(i)}},Lr=Qr,$r=Object(N["a"])(Lr,Ir,Cr,!1,null,null,null),Br=$r.exports,Yr={components:{ActivePageTitle:$,GattTree:ne,ButtonBar:Ce,ProfileLayout:$a,ServiceLayout:hn,CharacteristicLayout:Hn,DescriptorLayout:cr,SigLayout:yr,WaspMarkdown:Re["WaspMarkdown"],ProfileValidators:Br,UpgradeRuleDialog:Ge["UpgradeRuleDialog"]},data:function(){return{isDark:!0,GATT_TYPES:C,BUTTON_PROPS:S,mini:!1}},computed:m()(m()(m()({},Object(g["mapGetters"])("MainView",["sigLayout","dialogOn"])),Object(g["mapGetters"])("GattConfiguratorApp",["gatt","mergedGatt","selectedItem"])),{},{layout:function(){return this.selectedItem.gatt_type},headerClasses:function(){var t=!this.isDark;return{"bg-white":t,"text-black":t,"bg-dark":!t}}}),watch:{"$q.dark.isActive":function(t){this.isDark=t}},created:function(){this.isDark=this.$q.dark.isActive},methods:m()(m()(m()(m()({},Object(g["mapActions"])("MainView",["setSigLayout"])),Object(g["mapActions"])("Markdown",["goToMarkdownId"])),Object(g["mapActions"])("GattConfiguratorApp",["setSelectedItem"])),{},{onScroll:function(t){if(!this.sigLayout&&!this.dialogOn){var e=pn(t,this.selectedItem,this.mergedGatt);null!=e&&this.setSelectedItem(e)}}})},Fr=Yr,zr=i("4d5a"),Wr=i("e359"),Hr=i("9404"),Kr=i("09e3"),Jr=i("9989"),Zr=Object(N["a"])(Fr,v,h,!1,null,null,null),Xr=Zr.exports;Q()(Zr,"components",{QLayout:zr["a"],QHeader:Wr["a"],QSeparator:ie["a"],QBtn:ue["a"],QDrawer:Hr["a"],QScrollArea:nn["a"],QPageContainer:Kr["a"],QPage:Jr["a"]});var ts=i("af10"),es=i.n(ts),is=(i("7654"),i("5993"),{components:{StudioLoader:es.a,AppWindow:Xr},computed:m()({},Object(g["mapGetters"])("MainView",["ready"]))}),as=is,ns=Object(N["a"])(as,d,p,!1,null,null,null),rs=ns.exports,ss=i("a18c"),cs=i.n(ss),os=function(){return ls.apply(this,arguments)};function ls(){return ls=n()(regeneratorRuntime.mark((function t(){var e,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("function"!==typeof gi){t.next=6;break}return t.next=3,gi({Vue:r["default"]});case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0=gi;case 7:if(e=t.t0,"function"!==typeof cs.a){t.next=14;break}return t.next=11,cs()({Vue:r["default"],store:e});case 11:t.t1=t.sent,t.next=15;break;case 14:t.t1=cs.a;case 15:return i=t.t1,e.$router=i,a={router:i,store:e,render:function(t){return t(rs)}},a.el="#q-app",t.abrupt("return",{app:a,store:e,router:i});case 20:case"end":return t.stop()}}),t)}))),ls.apply(this,arguments)}var us=i("bc3a"),ds=i.n(us);r["default"].prototype.$axios=ds.a;var ps=function(t){var e=t.app;window.Cypress&&(window.app=e,Ot["default"].info("DEV or Cypress mode detected, app is available"))},fs="";function ms(){return vs.apply(this,arguments)}function vs(){return vs=n()(regeneratorRuntime.mark((function t(){var e,i,a,n,s,c,o,l,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,os();case 2:e=t.sent,i=e.app,a=e.store,n=e.router,s=!1,c=function(t){s=!0;var e=Object(t)===t?n.resolve(t).route.fullPath:t;window.location.href=e},o=window.location.href.replace(window.location.origin,""),l=[void 0,void 0,ps],u=0;case 11:if(!(!1===s&&u<l.length)){t.next=29;break}if("function"===typeof l[u]){t.next=14;break}return t.abrupt("continue",26);case 14:return t.prev=14,t.next=17,l[u]({app:i,router:n,store:a,Vue:r["default"],ssrContext:null,redirect:c,urlPath:o,publicPath:fs});case 17:t.next=26;break;case 19:if(t.prev=19,t.t0=t["catch"](14),!t.t0||!t.t0.url){t.next=24;break}return window.location.href=t.t0.url,t.abrupt("return");case 24:return console.error("[Quasar] boot error:",t.t0),t.abrupt("return");case 26:u++,t.next=11;break;case 29:if(!0!==s){t.next=31;break}return t.abrupt("return");case 31:new r["default"](i);case 32:case"end":return t.stop()}}),t,null,[[14,19]])}))),vs.apply(this,arguments)}ms()},"31cd":function(t,e,i){},"5bbd":function(t,e,i){},"72f7f":function(t,e,i){},"8c66":function(t,e,i){"use strict";i("ad81")},9633:function(t,e,i){"use strict";i("db4c")},a18c:function(t,e){},a70f:function(t,e,i){},ad81:function(t,e,i){},b6d9:function(t,e,i){"use strict";i("f63b")},c93e:function(t,e,i){"use strict";i("5bbd")},db4c:function(t,e,i){},f63b:function(t,e,i){}});